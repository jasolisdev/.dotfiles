(()=>{var e,t={1913:(e,t,n)=>{"use strict";var o={};n.r(o),n.d(o,{ENTER_LOGIN_MODE:()=>E,ENTER_SETTINGS_MODE:()=>v,ENTER_SIGNUP_MODE:()=>y,ENTER_SIGNUP_MODE_STEP_0:()=>w,ENTER_SIGNUP_MODE_STEP_1:()=>_,ENTER_WELCOME_MODE:()=>S,INTERACTION:()=>k,REMOTE_CONFIG_PROPS:()=>O,START_APP:()=>b,enterLoginMode:()=>N,enterSettingsMode:()=>D,enterSignupMode:()=>P,enterSignupModeStep0:()=>I,enterSignupModeStep1:()=>T,enterWelcomeMode:()=>A,interaction:()=>M,openSignupPage:()=>F,remoteConfigProps:()=>U,startApp:()=>C});var a={};n.r(a),n.d(a,{ABORT_LOGIN_TYPE_ACCOUNTS:()=>pe,ACCOUNTS_METHODS:()=>ue,LOADING:()=>re,LOGIN_BEFORE:()=>te,LOGIN_CLEAR_ERRORS:()=>oe,LOGIN_FAIL:()=>ae,LOGIN_SUCCESS:()=>ne,LOGIN_TYPE_ACCOUNTS:()=>de,LOGIN_TYPE_AUTOLOGIN:()=>ge,LOGIN_TYPE_EMAIL:()=>ie,LOGIN_TYPE_FACEBOOK:()=>le,LOGIN_TYPE_FACEBOOK_POPUP:()=>ce,UTM_PARAMETERS:()=>se,abortLoginWithAccounts:()=>Ee,fetchUTMParameters:()=>ve,loading:()=>be,login:()=>we,loginClearErrors:()=>Oe,loginFailed:()=>fe,loginSuccess:()=>he,loginWithAccounts:()=>_e,loginWithFacebookPopup:()=>Se,receivedUTMParameters:()=>ke});var r={};n.r(r),n.d(r,{CLEAR_ALL_ERRORS:()=>Qe,COUNTRY_NOT_LAUNCHED:()=>Xe,FACEBOOK_SIGNUP_ATTEMPT:()=>Ve,FACEBOOK_SIGNUP_FAILURE:()=>Ke,FACEBOOK_SIGNUP_SUCCESS:()=>ze,SIGNUP_ATTEMPT:()=>He,SIGNUP_FAILURE:()=>We,SIGNUP_RESTRICTIONS_FAILURE:()=>Ge,SIGNUP_RESTRICTIONS_SUCCESS:()=>Be,SIGNUP_SUCCESS:()=>$e,UPDATE_SIGNUP_DATA:()=>Je,VALIDATE_FIELD_ATTEMPT:()=>Ye,VALIDATE_FIELD_FAILURE:()=>qe,VALIDATE_FIELD_SUCCESS:()=>Ze,clearAllErrors:()=>bt,countryNotLaunched:()=>ft,facebookSignup:()=>ct,facebookSignupFailure:()=>dt,facebookSignupSuccess:()=>gt,getSignupRestrictions:()=>et,signup:()=>ot,signupAttempt:()=>rt,signupFailure:()=>it,signupRestrictionsFailure:()=>nt,signupRestrictionsSuccess:()=>tt,signupSuccess:()=>st,signupWithAccounts:()=>lt,updateSignupData:()=>ht,validateField:()=>at,validateFieldAttempt:()=>pt,validateFieldFailure:()=>ut,validateFieldSuccess:()=>mt});var s={};n.r(s),n.d(s,{SETTINGS_FETCH_PROXY_SETTINGS_FAILURE:()=>Ut,SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS:()=>Dt,SETTINGS_RESTART_CLIENT_FAILURE:()=>Rt,SETTINGS_RESTART_CLIENT_SUCCESS:()=>Lt,SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE:()=>Mt,SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS:()=>Ft,fetchProxySettings:()=>xt,restartClient:()=>Bt,updateProxySettings:()=>jt});var i=n(7294),l=n.n(i),c=n(3935),g=n.n(c),d=n(7209),p=n(5858),u=n(2976),m=n(685),h=n(9713),f=n.n(h);const b="START_APP",y="ENTER_SIGNUP_MODE",w="ENTER_SIGNUP_MODE_STEP_0",_="ENTER_SIGNUP_MODE_STEP_1",E="ENTER_LOGIN_MODE",S="ENTER_WELCOME_MODE",v="ENTER_SETTINGS_MODE",k="INTERACTION",O="REMOTE_CONFIG_PROPS";function C(){return{type:b}}function P(e=null){return{type:y,actionHash:e}}function I(){return{type:w}}function T(){return{type:_}}function N(e=null){return{type:E,actionHash:e}}function A(e=null){return{type:S,errorMessage:e}}function D(){return{type:v}}function U(e){return{type:O,props:e}}function F(e=!1){return(t,n)=>{const o=n();let a,r={};switch(e?"website":"desktop-app"){case"desktop-app":t(P());break;case"website":{r=o.login.utmParameters||{utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""};const e=Object.keys(r).reduce(((e,t)=>(e[t]=encodeURIComponent(r[t]),e)),{});a=`https://www.spotify.com/signup?utm_source=${e.utm_source}&utm_medium=${e.utm_medium}&utm_campaign=${e.utm_campaign}`,e.referral&&(a+=`&referral=${e.referral}&referrer=${e.referral}`),window.open(a);break}}}}function M(e,t,n,o,a){return{type:k,page:e,interactionType:t,intent:n,itemId:o,actionHash:a}}const L=e=>n.g&&"function"==typeof n.g._getSpotifyModule?new Promise(((t,o)=>{n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:o})})):null,R="https://www.spotify.com/redirect/account-page/",x="showSettings",j={id:"UnknownLoginErrorMessage"},B={id:"DefaultErrorMessage",replace:[x]},G={id:"FbFailureOpenPopup",silent:!0},H={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[x]},400:j,401:j,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:j,405:j,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[R]},408:{id:"RegionMismatchMessage",replace:[R,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:j,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:j,415:j,416:j,417:{id:"FacebookCredentialsMisusedMessage"},418:j,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]},1001:{silent:!0},1002:G,1003:{id:"FbUserNotFoundSignUp",replace:["showSignup"]},1004:G,1005:G,1006:G},W={1:j,2:j,3:{id:"BadCredentialsMessage"},4:j,5:j,6:j,7:j,8:j,9:j},$={1:{silent:!0},2:j,3:j,4:{id:"SessionExpiredMessage"},5:B},V=window.localStorage;function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Y="lastUsername",q="THIS_USER_DOES_NOT_EXIST_AND_IS_A_PLACEHOLDER",Z="utmParameters",J=V.getItem(Z),X=V.getItem(Y),Q={errorData:null,loginInProgress:!1,redirectTo:null,username:X!==q?X:"",utmParameters:J?JSON.parse(J):null};const ee=function(e=Q,t){switch(t.type){case Wt.LOADING:return K(K({},e),{},{loading:!0,throbberDelay:t.throbberDelay});case Wt.LOGIN_FAIL:return K(K({},e),{},{loading:!1,errorData:t.errorData,loggedIn:!1,loginInProgress:!1});case Wt.LOGIN_BEFORE:return K(K({},e),{},{errorData:t.errorData,loggedIn:!1,loginInProgress:t.loginInProgress,username:t.username});case Wt.LOGIN_SUCCESS:return K(K({},e),{},{loading:!1,loggedIn:!0,redirectDelay:t.redirectDelay||0,redirectTo:t.redirectTo,username:t.username});case Wt.UTM_PARAMETERS:return K(K({},e),{},{utmParameters:t.utmParameters});case Wt.LOGIN_CLEAR_ERRORS:return K(K({},e),{},{errorData:null});default:return e}},te="LOGIN_BEFORE",ne="LOGIN_SUCCESS",oe="LOGIN_CLEAR_ERRORS",ae="LOGIN_FAIL",re="LOADING",se="UTM_PARAMETERS",ie="login",le="login-facebook",ce="login-facebook-popup",ge="autologin",de="login-accounts",pe="abort-login-accounts",ue={facebook:"facebook",apple:"apple",google:"google"};function me(e,t=ie){return{type:te,errorData:null,username:e||"",loginInProgress:t===ie,loginType:t}}function he(e,t,n=ie,o=!1,a){return{type:ne,errorData:null,redirectTo:a,redirectDelay:t||0,username:e,loginType:n,afterSignup:o}}function fe(e,t=ie){return{type:ae,errorData:e,loginType:t}}function be(e){return{type:re,throbberDelay:e&&e.throbberDelay?e.throbberDelay:0}}const ye=async(e,t,{defaultErrorCode:n,redirectDelay:o=0}={},a=ie,r=!1,s=null,i=!0)=>{s&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=s);try{const n=JSON.parse(await L(t)).redirectTo||"xpui";let s=null;t&&t.args&&t.args[0]&&(s=t.args[0].username),e(he(i?s:q,o,a,r,n))}catch(t){let o=t;n?o={errorCode:n}:"string"==typeof t&&(o=JSON.parse(t)),o.errorCode&&H[o.errorCode]&&"FbFailureOpenPopup"===H[o.errorCode].id?e(Se(s)):e(fe(o,a))}};function we({username:e,password:t,rememberMe:n},o=!1,a=null){return r=>{const s=o?ge:ie;r(me(n?e:q,s));ye(r,{name:ie,args:[{username:e,password:t,rememberMe:n}]},{redirectDelay:200},s,o,a,n)}}function _e(e,t){return n=>{n(me(null,de));ye(n,{name:de,args:[{method:e,enableSignup:!1}]},{redirectDelay:200},de,!1,t)}}function Ee(){return async()=>{await L({name:pe,args:[]})}}function Se(e=null){return t=>{t(me(null,le));ye(t,{name:ce,args:[]},{redirectDelay:200},le,!1,e)}}function ve(){return async e=>{e(ke(JSON.parse(await L({name:"get-signup-utm-parameters",args:[]}))))}}function ke(e){return{type:se,utmParameters:e}}function Oe(){return{type:oe}}var Ce=n(6479),Pe=n.n(Ce),Ie=n(8495),Te=n.n(Ie);const Ne=["errors"];function Ae(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.DESKTOP_SIGNUP_DEBUG_KEY;return e||"4c7a36d5260abca4af282779720cf631"}function De(){const e="undefined"!=typeof window&&window.__spotify&&window.__spotify.client_version||"";if(!e)throw new Error("Missing Spotify App Version! Something is wrong: talk to #desktop-squad.");return["Spotify-App-Version",e]}function Ue(){const e="undefined"!=typeof window&&window.navigator&&window.navigator.platform||"";let t="";if(-1!==e.indexOf("Mac")?t="OSX":-1!==e.indexOf("Win")?t="Win32":-1!==e.indexOf("Linux")&&(t="Linux"),!t)throw new Error("Missing App Platform! Something is wrong: talk to #desktop-squad.");return["App-Platform",t]}function Fe(e){const t=new Map(Object.entries(e).sort()),n=function(e){const t=Te().create();return e.forEach((e=>{void 0!==e&&t.update(e.toString())})),t.hex()}(t);if(t.size>n.length)return t;const o=[...t],a=[...Array(t.size).keys()].sort((function(e,t){const a=n.charAt(e).localeCompare(n.charAt(t));return 0!==a?a:o[e][0].localeCompare(o[t][0])})),r=new Map;return a.forEach((function(e){r.set(o[e][0],o[e][1])})),r}const Me=e=>async(t,n,o)=>{const a=function({name:e,email:t,password:n,gender:o,birthDate:a={},sendEmail:r,shareData:s,agreeEula:i}={},l={utm_source:"spotify",utm_medium:"desktop-unknown",utm_campaign:"organic",referral:""},c=!1){const g=Object.keys(l).reduce(((e,t)=>(e[t]=encodeURIComponent(l[t]),e)),{});let d=`https://login.app.spotify.com?utm_source=${g.utm_source}&utm_medium=${g.utm_medium}&utm_campaign=${g.utm_campaign}`;g.referral&&(d+=`&referral=${g.referral}&referrer=${g.referral}`);const p={key:Ae(),displayname:e,email:t,password:n,password_repeat:n,gender:o,birth_year:a.year,birth_month:a.month,birth_day:a.day,iagree:i?1:0,creation_point:d,creation_flow:"desktop",platform:"desktop",referrer:g.referral};return"boolean"==typeof r&&(p["send-email"]=r),"boolean"==typeof s&&(p.thirdpartyemail=s),c&&Object.keys(p).forEach((e=>{void 0===p[e]&&delete p[e]})),Fe(p)}(t,n,o),r=new FormData;a.forEach(((e,t)=>{r.append(t,e)}));const s=[De(),Ue()].reduce(((e,t)=>(e[t[0]]=t[1],e)),{}),i={method:"POST",body:r,headers:{"App-Platform":s["App-Platform"],"Spotify-App-Version":s["Spotify-App-Version"],"X-Client-Id":{NODE_ENV:"production",DEBUG_EVENT_SENDER:!1,DEBUG_SEMANTIC_METRICS:void 0,CDN_FILE_URLS:'{"fonts/CircularSpUIAraOnly-Black.otf":"/fonts/CircularSpUIAraOnly-Black.otf","fonts/CircularSpUIAraOnly-Black.woff":"/fonts/CircularSpUIAraOnly-Black.woff","fonts/CircularSpUIAraOnly-Black.woff2":"/fonts/CircularSpUIAraOnly-Black.woff2","fonts/CircularSpUIAraOnly-Bold.otf":"/fonts/CircularSpUIAraOnly-Bold.otf","fonts/CircularSpUIAraOnly-Bold.woff":"/fonts/CircularSpUIAraOnly-Bold.woff","fonts/CircularSpUIAraOnly-Bold.woff2":"/fonts/CircularSpUIAraOnly-Bold.woff2","fonts/CircularSpUIAraOnly-Book.otf":"/fonts/CircularSpUIAraOnly-Book.otf","fonts/CircularSpUIAraOnly-Book.woff":"/fonts/CircularSpUIAraOnly-Book.woff","fonts/CircularSpUIAraOnly-Book.woff2":"/fonts/CircularSpUIAraOnly-Book.woff2","fonts/CircularSpUIAraOnly-Light.otf":"/fonts/CircularSpUIAraOnly-Light.otf","fonts/CircularSpUIAraOnly-Light.woff":"/fonts/CircularSpUIAraOnly-Light.woff","fonts/CircularSpUIAraOnly-Light.woff2":"/fonts/CircularSpUIAraOnly-Light.woff2","fonts/CircularSpUICyrOnly-Black.otf":"/fonts/CircularSpUICyrOnly-Black.otf","fonts/CircularSpUICyrOnly-Black.woff":"/fonts/CircularSpUICyrOnly-Black.woff","fonts/CircularSpUICyrOnly-Black.woff2":"/fonts/CircularSpUICyrOnly-Black.woff2","fonts/CircularSpUICyrOnly-Bold.otf":"/fonts/CircularSpUICyrOnly-Bold.otf","fonts/CircularSpUICyrOnly-Bold.woff":"/fonts/CircularSpUICyrOnly-Bold.woff","fonts/CircularSpUICyrOnly-Bold.woff2":"/fonts/CircularSpUICyrOnly-Bold.woff2","fonts/CircularSpUICyrOnly-Book.otf":"/fonts/CircularSpUICyrOnly-Book.otf","fonts/CircularSpUICyrOnly-Book.woff":"/fonts/CircularSpUICyrOnly-Book.woff","fonts/CircularSpUICyrOnly-Book.woff2":"/fonts/CircularSpUICyrOnly-Book.woff2","fonts/CircularSpUICyrOnly-Light.otf":"/fonts/CircularSpUICyrOnly-Light.otf","fonts/CircularSpUICyrOnly-Light.woff":"/fonts/CircularSpUICyrOnly-Light.woff","fonts/CircularSpUICyrOnly-Light.woff2":"/fonts/CircularSpUICyrOnly-Light.woff2","fonts/CircularSpUIHbrOnly-Black.otf":"/fonts/CircularSpUIHbrOnly-Black.otf","fonts/CircularSpUIHbrOnly-Black.woff":"/fonts/CircularSpUIHbrOnly-Black.woff","fonts/CircularSpUIHbrOnly-Black.woff2":"/fonts/CircularSpUIHbrOnly-Black.woff2","fonts/CircularSpUIHbrOnly-Bold.otf":"/fonts/CircularSpUIHbrOnly-Bold.otf","fonts/CircularSpUIHbrOnly-Bold.woff":"/fonts/CircularSpUIHbrOnly-Bold.woff","fonts/CircularSpUIHbrOnly-Bold.woff2":"/fonts/CircularSpUIHbrOnly-Bold.woff2","fonts/CircularSpUIHbrOnly-Book.otf":"/fonts/CircularSpUIHbrOnly-Book.otf","fonts/CircularSpUIHbrOnly-Book.woff":"/fonts/CircularSpUIHbrOnly-Book.woff","fonts/CircularSpUIHbrOnly-Book.woff2":"/fonts/CircularSpUIHbrOnly-Book.woff2","fonts/CircularSpUIHbrOnly-Light.otf":"/fonts/CircularSpUIHbrOnly-Light.otf","fonts/CircularSpUIHbrOnly-Light.woff":"/fonts/CircularSpUIHbrOnly-Light.woff","fonts/CircularSpUIHbrOnly-Light.woff2":"/fonts/CircularSpUIHbrOnly-Light.woff2","fonts/CircularSpUIv3T-Black.ttf":"/fonts/CircularSpUIv3T-Black.ttf","fonts/CircularSpUIv3T-Black.woff":"/fonts/CircularSpUIv3T-Black.woff","fonts/CircularSpUIv3T-Black.woff2":"/fonts/CircularSpUIv3T-Black.woff2","fonts/CircularSpUIv3T-Bold.ttf":"/fonts/CircularSpUIv3T-Bold.ttf","fonts/CircularSpUIv3T-Bold.woff":"/fonts/CircularSpUIv3T-Bold.woff","fonts/CircularSpUIv3T-Bold.woff2":"/fonts/CircularSpUIv3T-Bold.woff2","fonts/CircularSpUIv3T-Book.ttf":"/fonts/CircularSpUIv3T-Book.ttf","fonts/CircularSpUIv3T-Book.woff":"/fonts/CircularSpUIv3T-Book.woff","fonts/CircularSpUIv3T-Book.woff2":"/fonts/CircularSpUIv3T-Book.woff2","fonts/CircularSpUIv3T-Light.ttf":"/fonts/CircularSpUIv3T-Light.ttf","fonts/CircularSpUIv3T-Light.woff":"/fonts/CircularSpUIv3T-Light.woff","fonts/CircularSpUIv3T-Light.woff2":"/fonts/CircularSpUIv3T-Light.woff2","fonts/spoticon_regular_2.ttf":"/fonts/spoticon_regular_2.ttf","fonts/spoticon_regular_2.woff":"/fonts/spoticon_regular_2.woff","fonts/spoticon_regular_2.woff2":"/fonts/spoticon_regular_2.woff2","images/checkmark.png":"/images/checkmark.png","images/concert-hub-fb-card.png":"/images/concert-hub-fb-card.png","images/concert-hub-header.png":"/images/concert-hub-header.png","images/concert-hub-iphone-de.png":"/images/concert-hub-iphone-de.png","images/concert-hub-iphone-el.png":"/images/concert-hub-iphone-el.png","images/concert-hub-iphone-en.png":"/images/concert-hub-iphone-en.png","images/concert-hub-iphone-es_419.png":"/images/concert-hub-iphone-es_419.png","images/concert-hub-iphone-es.png":"/images/concert-hub-iphone-es.png","images/concert-hub-iphone-fi.png":"/images/concert-hub-iphone-fi.png","images/concert-hub-iphone-fr_CA.png":"/images/concert-hub-iphone-fr_CA.png","images/concert-hub-iphone-fr.png":"/images/concert-hub-iphone-fr.png","images/concert-hub-iphone-hu.png":"/images/concert-hub-iphone-hu.png","images/concert-hub-iphone-id.png":"/images/concert-hub-iphone-id.png","images/concert-hub-iphone-it.png":"/images/concert-hub-iphone-it.png","images/concert-hub-iphone-ja.png":"/images/concert-hub-iphone-ja.png","images/concert-hub-iphone-ms.png":"/images/concert-hub-iphone-ms.png","images/concert-hub-iphone-nl.png":"/images/concert-hub-iphone-nl.png","images/concert-hub-iphone-pl.png":"/images/concert-hub-iphone-pl.png","images/concert-hub-iphone-pt_BR.png":"/images/concert-hub-iphone-pt_BR.png","images/concert-hub-iphone-sv.png":"/images/concert-hub-iphone-sv.png","images/concert-hub-iphone-tr.png":"/images/concert-hub-iphone-tr.png","images/concert-hub-iphone-zh_TW.png":"/images/concert-hub-iphone-zh_TW.png","images/concert-hub-twitter-card.png":"/images/concert-hub-twitter-card.png","images/connect_header@1x.png":"/images/connect_header@1x.png","images/connect-to-devices-white.svg":"/images/connect-to-devices-white.svg","images/desktop-auth-check.svg":"/images/desktop-auth-check.svg","images/desktop-auth-error.svg":"/images/desktop-auth-error.svg","images/devices/android.png":"/images/devices/android.png","images/devices/ios.png":"/images/devices/ios.png","images/devices/mac-web.png":"/images/devices/mac-web.png","images/devices/mac.png":"/images/devices/mac.png","images/devices/windowsphone.png":"/images/devices/windowsphone.png","images/download-badges/apple/ar.png":"/images/download-badges/apple/ar.png","images/download-badges/apple/az.png":"/images/download-badges/apple/az.png","images/download-badges/apple/bg.png":"/images/download-badges/apple/bg.png","images/download-badges/apple/cs.png":"/images/download-badges/apple/cs.png","images/download-badges/apple/da.png":"/images/download-badges/apple/da.png","images/download-badges/apple/de.png":"/images/download-badges/apple/de.png","images/download-badges/apple/el.png":"/images/download-badges/apple/el.png","images/download-badges/apple/en.png":"/images/download-badges/apple/en.png","images/download-badges/apple/es_419.png":"/images/download-badges/apple/es_419.png","images/download-badges/apple/es_ES.png":"/images/download-badges/apple/es_ES.png","images/download-badges/apple/es.png":"/images/download-badges/apple/es.png","images/download-badges/apple/et.png":"/images/download-badges/apple/et.png","images/download-badges/apple/fi.png":"/images/download-badges/apple/fi.png","images/download-badges/apple/fil.png":"/images/download-badges/apple/fil.png","images/download-badges/apple/fr.png":"/images/download-badges/apple/fr.png","images/download-badges/apple/he.png":"/images/download-badges/apple/he.png","images/download-badges/apple/hu.png":"/images/download-badges/apple/hu.png","images/download-badges/apple/id.png":"/images/download-badges/apple/id.png","images/download-badges/apple/int.png":"/images/download-badges/apple/int.png","images/download-badges/apple/it.png":"/images/download-badges/apple/it.png","images/download-badges/apple/ja.png":"/images/download-badges/apple/ja.png","images/download-badges/apple/ko.png":"/images/download-badges/apple/ko.png","images/download-badges/apple/lt.png":"/images/download-badges/apple/lt.png","images/download-badges/apple/lv.png":"/images/download-badges/apple/lv.png","images/download-badges/apple/ms.png":"/images/download-badges/apple/ms.png","images/download-badges/apple/mt.png":"/images/download-badges/apple/mt.png","images/download-badges/apple/nl.png":"/images/download-badges/apple/nl.png","images/download-badges/apple/no.png":"/images/download-badges/apple/no.png","images/download-badges/apple/pl.png":"/images/download-badges/apple/pl.png","images/download-badges/apple/pt_BR.png":"/images/download-badges/apple/pt_BR.png","images/download-badges/apple/pt.png":"/images/download-badges/apple/pt.png","images/download-badges/apple/ro.png":"/images/download-badges/apple/ro.png","images/download-badges/apple/ru.png":"/images/download-badges/apple/ru.png","images/download-badges/apple/sk.png":"/images/download-badges/apple/sk.png","images/download-badges/apple/sl.png":"/images/download-badges/apple/sl.png","images/download-badges/apple/sv.png":"/images/download-badges/apple/sv.png","images/download-badges/apple/th.png":"/images/download-badges/apple/th.png","images/download-badges/apple/tr.png":"/images/download-badges/apple/tr.png","images/download-badges/apple/vi.png":"/images/download-badges/apple/vi.png","images/download-badges/apple/zh_HANS.png":"/images/download-badges/apple/zh_HANS.png","images/download-badges/apple/zh_HANT.png":"/images/download-badges/apple/zh_HANT.png","images/download-badges/google/af.png":"/images/download-badges/google/af.png","images/download-badges/google/be.png":"/images/download-badges/google/be.png","images/download-badges/google/bg.png":"/images/download-badges/google/bg.png","images/download-badges/google/ca.png":"/images/download-badges/google/ca.png","images/download-badges/google/cs.png":"/images/download-badges/google/cs.png","images/download-badges/google/da.png":"/images/download-badges/google/da.png","images/download-badges/google/de.png":"/images/download-badges/google/de.png","images/download-badges/google/el.png":"/images/download-badges/google/el.png","images/download-badges/google/en.png":"/images/download-badges/google/en.png","images/download-badges/google/es_ES.png":"/images/download-badges/google/es_ES.png","images/download-badges/google/es.png":"/images/download-badges/google/es.png","images/download-badges/google/et.png":"/images/download-badges/google/et.png","images/download-badges/google/fa.png":"/images/download-badges/google/fa.png","images/download-badges/google/fi.png":"/images/download-badges/google/fi.png","images/download-badges/google/fil.png":"/images/download-badges/google/fil.png","images/download-badges/google/fr.png":"/images/download-badges/google/fr.png","images/download-badges/google/hr.png":"/images/download-badges/google/hr.png","images/download-badges/google/hu.png":"/images/download-badges/google/hu.png","images/download-badges/google/id.png":"/images/download-badges/google/id.png","images/download-badges/google/int.png":"/images/download-badges/google/int.png","images/download-badges/google/it.png":"/images/download-badges/google/it.png","images/download-badges/google/ja.png":"/images/download-badges/google/ja.png","images/download-badges/google/ko.png":"/images/download-badges/google/ko.png","images/download-badges/google/lt.png":"/images/download-badges/google/lt.png","images/download-badges/google/lv.png":"/images/download-badges/google/lv.png","images/download-badges/google/ms.png":"/images/download-badges/google/ms.png","images/download-badges/google/nl.png":"/images/download-badges/google/nl.png","images/download-badges/google/no.png":"/images/download-badges/google/no.png","images/download-badges/google/pl.png":"/images/download-badges/google/pl.png","images/download-badges/google/pt.png":"/images/download-badges/google/pt.png","images/download-badges/google/ro.png":"/images/download-badges/google/ro.png","images/download-badges/google/ru.png":"/images/download-badges/google/ru.png","images/download-badges/google/sk.png":"/images/download-badges/google/sk.png","images/download-badges/google/sl.png":"/images/download-badges/google/sl.png","images/download-badges/google/sr.png":"/images/download-badges/google/sr.png","images/download-badges/google/sv.png":"/images/download-badges/google/sv.png","images/download-badges/google/sw.png":"/images/download-badges/google/sw.png","images/download-badges/google/th.png":"/images/download-badges/google/th.png","images/download-badges/google/tr.png":"/images/download-badges/google/tr.png","images/download-badges/google/uk.png":"/images/download-badges/google/uk.png","images/download-badges/google/vi.png":"/images/download-badges/google/vi.png","images/download-badges/google/zh_CN.png":"/images/download-badges/google/zh_CN.png","images/download-badges/google/zh_HANT.png":"/images/download-badges/google/zh_HANT.png","images/download-badges/google/zh_HK.png":"/images/download-badges/google/zh_HK.png","images/download-badges/google/zh_TW.png":"/images/download-badges/google/zh_TW.png","images/download-badges/google/zu.png":"/images/download-badges/google/zu.png","images/embed-podcast/upsell-background.png":"/images/embed-podcast/upsell-background.png","images/embed/copy-32_circle_grey_outline_bg.svg":"/images/embed/copy-32_circle_grey_outline_bg.svg","images/embed/embed-code-32_circle_grey_outline_bg.svg":"/images/embed/embed-code-32_circle_grey_outline_bg.svg","images/embed/fb_colour.svg":"/images/embed/fb_colour.svg","images/embed/messenger_colour.svg":"/images/embed/messenger_colour.svg","images/embed/twitter_colour.svg":"/images/embed/twitter_colour.svg","images/embed/whatsapp.svg":"/images/embed/whatsapp.svg","images/employee-podcasts-modal-art.png":"/images/employee-podcasts-modal-art.png","images/equaliser-animated-green.gif":"/images/equaliser-animated-green.gif","images/equaliser-green.svg":"/images/equaliser-green.svg","images/favicon.ico":"/images/favicon.ico","images/favicon.png":"/images/favicon.png","images/favicon16.png":"/images/favicon16.png","images/favicon32.png":"/images/favicon32.png","images/focused_stroy_play.png":"/images/focused_stroy_play.png","images/follow/avatar-placeholder.png":"/images/follow/avatar-placeholder.png","images/follow/sprite.gif":"/images/follow/sprite.gif","images/follow/sprite@1.png":"/images/follow/sprite@1.png","images/hifi-button-off.svg":"/images/hifi-button-off.svg","images/hifi-button-on.svg":"/images/hifi-button-on.svg","images/hifi.svg":"/images/hifi.svg","images/home-icon.svg":"/images/home-icon.svg","images/icons/Spotify_1024.png":"/images/icons/Spotify_1024.png","images/icons/Spotify_128.png":"/images/icons/Spotify_128.png","images/icons/Spotify_16.png":"/images/icons/Spotify_16.png","images/icons/Spotify_256.png":"/images/icons/Spotify_256.png","images/icons/Spotify_32.png":"/images/icons/Spotify_32.png","images/icons/Spotify_512.png":"/images/icons/Spotify_512.png","images/icons/Spotify_64.png":"/images/icons/Spotify_64.png","images/icons/Spotify_MWP_192.png":"/images/icons/Spotify_MWP_192.png","images/icons/Spotify_MWP_512.png":"/images/icons/Spotify_MWP_512.png","images/improved-modal-bg.jpg":"/images/improved-modal-bg.jpg","images/login-background.jpg":"/images/login-background.jpg","images/login-signup-burst.svg":"/images/login-signup-burst.svg","images/logo-complete-black.svg":"/images/logo-complete-black.svg","images/logo-white-2x.png":"/images/logo-white-2x.png","images/mid-year.png":"/images/mid-year.png","images/og-image.png":"/images/og-image.png","images/playlist-folder-filled.svg":"/images/playlist-folder-filled.svg","images/ribbon-graphic-mobile.svg":"/images/ribbon-graphic-mobile.svg","images/ribbon-graphic.svg":"/images/ribbon-graphic.svg","images/s2l-desktopui-ltr.png":"/images/s2l-desktopui-ltr.png","images/s2l-desktopui-rtl.png":"/images/s2l-desktopui-rtl.png","images/s2l-mobileui.png":"/images/s2l-mobileui.png","images/spotifylogo.svg":"/images/spotifylogo.svg","images/station-header-wave.svg":"/images/station-header-wave.svg","images/station-wave.svg":"/images/station-wave.svg","images/sw_saber_ahsoka1.png":"/images/sw_saber_ahsoka1.png","images/sw_saber_anakin.png":"/images/sw_saber_anakin.png","images/sw_saber_leia.png":"/images/sw_saber_leia.png","images/sw_saber_luke.png":"/images/sw_saber_luke.png","images/sw_saber_mace.png":"/images/sw_saber_mace.png","images/sw_saber_rey.png":"/images/sw_saber_rey.png","images/sw_saber_vader.png":"/images/sw_saber_vader.png","images/touch-icon-114.png":"/images/touch-icon-114.png","images/touch-icon-144.png":"/images/touch-icon-144.png","images/touch-icon-57.png":"/images/touch-icon-57.png","images/touch-icon-72.png":"/images/touch-icon-72.png","images/tracklist-placeholder.png":"/images/tracklist-placeholder.png","images/vinyl-bottom-layer.svg":"/images/vinyl-bottom-layer.svg","images/vinyl-top-layer.svg":"/images/vinyl-top-layer.svg","images/zara-larsson-singles.png":"/images/zara-larsson-singles.png","js/fb.js":"/js/fb.js","js/gtm.js":"/js/gtm.js","js/retargeting-pixels.js":"/js/retargeting-pixels.js","js/urlRedirect.js":"/js/urlRedirect.js","js/urlScheme.js":"/js/urlScheme.js"}',PRODUCT_NAME:"desktop"}.SPOTIFY_CLIENT_ID}},l=new Request(e,i);((e,t)=>{const n=e.headers.get("content-type");e.headers.set("content-type",((e,t)=>[...e.split(";"),t].join(";"))(n,t))})(l,"charset=utf-8");const c=await fetch(l),g=await c.json()||{},{errors:d}=g,p=Pe()(g,Ne);if(d)throw d;return p},Le=Me("https://spclient.wg.spotify.com/signup/public/v1/account/"),Re=Me("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=true");function xe(){return window.__spotify&&!0===window.__spotify.is_running_on_teamcity}function je(e){const t=[],n=e&&e.app&&e.app.remoteConfigProps||{};return t.reduce(((e,t)=>(e.push([t,"=",String(n[t])].join("")),e)),[]).join("&")}const Be="SIGNUP_RESTRICTIONS_SUCCESS",Ge="SIGNUP_RESTRICTIONS_FAILURE",He="SIGNUP_ATTEMPT",We="SIGNUP_FAILURE",$e="SIGNUP_SUCCESS",Ve="FACEBOOK_SIGNUP_ATTEMPT",ze="FACEBOOK_SIGNUP_SUCCESS",Ke="FACEBOOK_SIGNUP_FAILURE",Ye="VALIDATE_FIELD_ATTEMPT",qe="VALIDATE_FIELD_FAILURE",Ze="VALIDATE_FIELD_SUCCESS",Je="UPDATE_SIGNUP_DATA",Xe="COUNTRY_NOT_LAUNCHED",Qe="CLEAR_ALL_ERRORS";function et(){return async(e,t)=>{const n=t();try{e(tt(xe()?{}:await(async()=>{const e=await fetch("https://spclient.wg.spotify.com/signup/public/v1/account/?validate=1"),t=await e.json()||{};if(t.errors&&t.errors.length>0)throw t.errors;return t})()))}catch(t){e(nt(t)),n.app&&n.app.mode&&"welcome"!==n.app.mode&&(e(N()),e(F(!0)))}}}function tt(e){return{type:Be,restrictions:e}}function nt(e){return{type:Ge,error:e}}function ot(e=null){return async(t,n)=>{t(rt());const o=n().signup.formData,a=n().login.utmParameters;try{await Le(o,a),t(st());const{email:n,password:r}=o;t(we({username:n,password:r,rememberMe:!0},!0,e))}catch(e){const n={};Object.keys(e).forEach((t=>{n["birthdate"===t?"birthDate":t]={message:e[t]}})),t(it(n))}}}function at(e){return async(t,n)=>{const o=n().signup.formData[e],a=n().login.utmParameters;t(pt(e,o));try{await Re({[e]:o},a,!0)}catch(n){n[e]&&t(ut(e,{message:n[e]}))}}}function rt(){return{type:He}}function st(){return{type:$e}}function it(e){return{type:We,errors:e}}function lt(e,t=null){return n=>{const o={name:de,args:[{method:e,enableSignup:!0}]};n(ct()),(async(e,t,n=null)=>{n&&(t.args=t.args||[],t.args[0]=t.args[0]||{},t.args[0].actionHash=n);try{const n=JSON.parse(await L(t)).redirectTo||"xpui";e(gt()),e(he(null,0,ge,!0,n))}catch(t){let n=t;"string"==typeof t&&(n=JSON.parse(t)),e(dt(n))}})(n,o,t)}}function ct(){return{type:Ve}}function gt(){return{type:ze}}function dt(e){return{type:Ke,errorData:e}}function pt(e,t){return{type:Ye,field:e,value:t}}function ut(e,t){return{type:qe,field:e,error:t}}function mt(e){return{type:Ze,field:e}}function ht(e){return{type:Je,data:e}}function ft(){return{type:Xe}}function bt(){return{type:Qe}}let yt,wt,_t;!function(e){e.af="af",e.am="am",e.ar="ar",e.az="az",e.bg="bz",e.bn="bn",e.bho="bho",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.es419="es-419",e.es="es",e.et="et",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="bn",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pa-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhTW="zh-TW",e.zu="zu"}(yt||(yt={})),function(e){e.AR="، ",e.FA="، ",e.EN=", "}(wt||(wt={})),function(e){e.ZERO="zero",e.ONE="one",e.TWO="two",e.FEW="few",e.MANY="many",e.OTHER="other"}(_t||(_t={}));let Et={};function St(e){return"number"==typeof e?e.toString():e.replace(/\$/,"$$$$")}const vt=e=>"ar"===e?"ar-u-nu-latn":e;class kt{constructor(){f()(this,"_locale",void 0),f()(this,"_dictionary",void 0),this._dictionary={},this._locale=yt.en}setDictionary(e){this._dictionary=e}setLocale(e){this._locale=e}getLocale(){return this._locale}toLocaleLowerCase(e){return null==e?void 0:e.toLocaleLowerCase(this._locale)}toLocaleUpperCase(e){return null==e?void 0:e.toLocaleUpperCase(this._locale)}get(e,...t){const n=e in this._dictionary?this._dictionary[e]:e;let o="";if("string"!=typeof n){const e=t[0],a=((e,t)=>{try{return(Et[e]||(Et[e]=new Intl.PluralRules(e))).select(t)}catch{return _t.OTHER}})(this._locale,parseInt(e,10)),r=n[a];void 0!==r?o=r:n.other&&(o=n.other)}else o=n;if(/%\d%/.test(o)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop.login.errorCode","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}if((null==t?void 0:t.length)>0)for(let e=0;e<t.length;e++){const n=t[e];if(null!=n)if("string"==typeof n)o=o.replace(`{${e}}`,St(n)).replace(`%${e}%`,St(n));else if("number"==typeof n){const t=this.formatNumber(n);o=o.replace(`{${e}}`,t).replace(`%${e}%`,t)}else if("object"==typeof n)for(const e of Object.keys(n)){const t=n[e];o=o.replace(`%${e}%`,St(t))}}return o}getSeparator(){switch(this._locale){case yt.ar:return wt.AR;case yt.fa:return wt.FA;default:return wt.EN}}formatNumber(e,t){return e.toLocaleString(vt(this._locale),t)}formatNumberCompact(e,t){const n={notation:"compact",maximumFractionDigits:1};if(t){const o=new kt;return o.setLocale(t),o.formatNumber(e,n)}return this.formatNumber(e,n)}formatDate(e,t=null){const n=t||{year:"numeric",month:"long",day:"numeric"};return new Intl.DateTimeFormat(vt(this._locale),n).format(e)}formatRelativeDate(e,t=null){var n;const o=new Date(Date.now()),a=(e=new Date(e)).getTime()-o.getTime();if(Math.abs(a)<2592e6&&null!==(n=Intl)&&void 0!==n&&n.RelativeTimeFormat){const{days:e,hours:t,minutes:n,seconds:o}=(r=a,{seconds:Math.round(r/1e3),minutes:Math.round(r/1e3/60),hours:Math.round(r/1e3/60/60),days:Math.round(r/1e3/60/60/24)}),s=new Intl.RelativeTimeFormat;return e||t||n?e||t?e?s.format(e,"days"):s.format(t,"hours"):s.format(n,"minutes"):s.format(o,"seconds")}var r;return this.formatDate(e,t)}__resetForTests(){this._dictionary={},this._locale=yt.en,Et={}}}const Ot=new kt,Ct=2,Pt=3,It=4,Tt={"auto-detect":{label:()=>Ot.get("desktop.settings.proxy.autodetect")},"no-proxy":{label:()=>Ot.get("desktop.settings.proxy.noproxy")},http:{label:()=>Ot.get("desktop.settings.proxy.http")},socks4:{label:()=>Ot.get("desktop.settings.proxy.socks4")},socks5:{label:()=>Ot.get("desktop.settings.proxy.socks5")}},Nt=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],At="sp://proxy/v1/";const Dt="SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS",Ut="SETTINGS_FETCH_PROXY_SETTINGS_FAILURE",Ft="SETTINGS_UPDATE_PROXY_SETTINGS_SUCCESS",Mt="SETTINGS_UPDATE_PROXY_SETTINGS_FAILURE",Lt="SETTINGS_RESTART_CLIENT_SUCCESS",Rt="SETTINGS_RESTART_CLIENT_FAILURE";function xt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"GET",uri:At}),persistent:!1,onSuccess:n=>{const o=JSON.parse(n);200!==o.status&&t(new Error(`Failed to fetch proxy settings (status code: ${o.status})`));const a=JSON.parse(o.body);e({mode:a["network.proxy.mode"],address:a["network.proxy.addr"],username:a["network.proxy.user"],password:a["network.proxy.pass"]})},onFailure:(e,n)=>{t(e)}})}))})().then((t=>{e(function(e){return{type:Dt,data:e}}(t))}),(t=>{e(function(e){return{type:Ut,error:e}}(t))}))}}function jt(e){return t=>{(async function(e){return new Promise(((t,n)=>{const o={"network.proxy.mode":e.mode};[Ct,Pt,It].includes(e.mode)&&(o["network.proxy.addr"]=e.address,o["network.proxy.user"]=e.username),[Ct,It].includes(e.mode)&&(o["network.proxy.pass"]=e.password),window.sendCosmosRequest({request:JSON.stringify({method:"PUT",uri:At,body:JSON.stringify(o)}),persistent:!1,onSuccess:()=>{t()},onFailure:(e,t)=>{n(e)}})}))})(e).then((()=>{t({type:Ft}),t(xt())}),(e=>{t(function(e){return{type:Mt,error:e}}(e))}))}}function Bt(){return e=>{(async function(){return new Promise(((e,t)=>{window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://desktop/v1/restart"}),persistent:!1,onSuccess:()=>{e()},onFailure:(e,n)=>{t(e)}})}))})().then((()=>{e({type:Lt})}),(t=>{e(function(e){return{type:Rt,error:e}}(t))}))}}function Gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ht(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gt(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Wt=Ht(Ht(Ht(Ht({},o),a),r),s);n(5697);class $t extends l().Component{constructor(e){super(e),this.state={hidden:this.props.delay>0}}componentDidMount(){!0===this.state.hidden&&(this.throbberTimeout=setTimeout((()=>{this.setState({hidden:!1})}),this.props.delay))}componentWillUnmount(){this.throbberTimeout&&clearTimeout(this.throbberTimeout)}render(){return this.state.hidden?null:l().createElement("div",{className:"GlueThrobber "+(this.props.initial?"throbber-initial":"throbber")},l().createElement("div",null))}}$t.defaultProps={delay:0,initial:!0};const Vt="loginOnlySingleButton",zt="signupOnlySingleButton",Kt="loginAndSignupSingleButton",Yt="none",qt={desktopWebAuthenticationMode:Yt},Zt=(e={})=>{const{desktopWebAuthenticationMode:t=Yt}=(null==e?void 0:e.remoteConfigProps)||qt;return t},Jt=e=>[Vt,Kt].includes(Zt(e)),Xt=e=>[zt,Kt].includes(Zt(e)),Qt=e=>"none"===Zt(e);function en(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?en(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):en(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const nn={operationUsed:null},on=(e=nn,t)=>t.type===Wt.ENTER_LOGIN_MODE?tn(tn({},e),{},{operationUsed:"login"}):t.type===Wt.ENTER_SIGNUP_MODE?tn(tn({},e),{},{operationUsed:"signup"}):tn({},e);var an=n(2808),rn=n.n(an);function sn(){return rn().create().toString()}var ln=n(8455);class cn extends l().PureComponent{constructor(e){super(e),this.handleLoginClick=this.handleLoginClick.bind(this),this.handleErrorClick=this.handleErrorClick.bind(this)}handleLoginClick(){const e=this.props.isWebAuthFlowControl?"open-page-login":"login-web",t=sn();this.props.openLoginPage(t),this.props.onInteraction("login/welcome","click",e,null,t)}handleErrorClick(e){if(e.target.getAttribute("data-action")){"showSettings"===e.target.getAttribute("data-action")&&this.props.openSettingsPage()}}render(){const{errorMessage:e}=this.props;return l().createElement("main",{className:"Welcome"},l().createElement("h1",{className:"HeroText __welcome"},Ot.get("desktop-auth.login.millions-of-songs"),l().createElement("br",null),Ot.get("desktop-auth.login.free-on-spotify")),l().createElement("div",{className:"Welcome__signup-or-login"},e&&l().createElement("div",{className:"Welcome__error-message",role:"alert",onClick:this.handleErrorClick,"aria-live":"assertive"},l().createElement(ln.Z,{className:"Welcome__error-message__icon"}),l().createElement("span",{dangerouslySetInnerHTML:{__html:e}})),l().createElement("button",{type:"button",className:"Welcome__button button button-green button-large",id:"login-button",onClick:this.handleLoginClick,"data-ta-id":"welcome-login-button","data-testid":"login-button"},Ot.get("desktop.login.LoginButton"))))}}const gn=(0,p.$j)((e=>({errorMessage:e.app.errorMessage,isWebAuthFlowControl:Qt(e.app)})),(e=>({openLoginPage:t=>e(Wt.enterLoginMode(t)),openSettingsPage:()=>e(Wt.enterSettingsMode()),onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r))})))(cn);var dn=n(7396),pn=n(7060),un=n(4184),mn=n.n(un);function hn(e,t,n){if(0===t)return!1;if(!e&&!t)return!1;let o=H;switch(e){case"session":o=W;break;case"desktop_login_accounts":o=$}const a=o[t]||B;if(a.silent)return!1;const r=a.replace||[];let s="";switch(a.id){case"UnknownLoginErrorMessage":s=Ot.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":s=Ot.get("desktop.login.DefaultErrorMessage",r[0]);break;case"SessionTerminatedMessage":s=Ot.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":s=Ot.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":s=Ot.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":s=Ot.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":s=Ot.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":s=Ot.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":s=Ot.get("desktop.login.ErrorProxyAuthRequired",r[0]);break;case"CriticalUpdate":s=Ot.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":s=Ot.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":s=Ot.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":s=Ot.get("desktop.login.MissingUserInfoMessage",r[0]);break;case"RegionMismatchMessage":s=Ot.get("desktop.login.RegionMismatchMessage",r[0],r[1]);break;case"PremiumUsersOnlyMessage":s=Ot.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":s=Ot.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":s=Ot.get("desktop.login.ClientUpdateFail",r[0]);break;case"FbUserNotFoundSignUp":s=Ot.get("desktop.login.FbUserNotFoundSignUp",r[0])}return`${s}<br>${Ot.get("desktop.login.errorCode",n)}`}function fn({validity:e={}}){return e.valid?null:["valueMissing","typeMismatch","tooShort"].find((t=>e[t]))}const bn=()=>l().createElement("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},l().createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0 8C0 3.58172 3.58172 0 8 0C12.4183 0 16 3.58172 16 8C16 12.4183 12.4183 16 8 16C3.58172 16 0 12.4183 0 8ZM7.25 3V10H8.75V3H7.25ZM7.25 11.5256V13.0256H8.75V11.5256H7.25Z",fill:"#eb6471"}));class yn extends l().PureComponent{render(){const{errorMessage:e}=this.props;return l().createElement("div",{"aria-live":"polite",className:mn()("FieldError",{"FieldError--hidden":!e})},l().createElement(bn,null),l().createElement("span",null,e||""))}}let wn=0;class _n extends l().PureComponent{constructor(...e){super(...e),this.idNumber=++wn,this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.onChange(e)}render(){const{label:e,placeholderLabel:t,name:n,type:o,isRequired:a,taId:r,id:s,defaultValue:i,value:c,minLength:g,autoFocus:d,hasError:p,isDisabled:u,isHiddenForScreenReaders:m,useCustomStyle:h,className:f,inputClassName:b,inputRef:y,onBlur:w,onFocus:_,onInput:E,onKeyDown:S,onKeyUp:v}=this.props,k=s||`GlueTextInput-${this.idNumber}`;return l().createElement("label",{className:h?f:"GlueTextInput",htmlFor:k,"aria-label":e,"aria-hidden":!!m||void 0},l().createElement("input",{className:h?b:mn()("GlueTextInput__input",{"GlueTextInput__input--has-error":p}),tabIndex:m?"-1":void 0,type:o,id:k,name:n,"data-ta-id":r,"aria-invalid":p,disabled:u,minLength:g,autoFocus:d,placeholder:t||e,value:i?void 0:c,defaultValue:i,onBlur:w,onFocus:_,onChange:this.handleChange,onInput:i?void 0:E,onKeyDown:S,onKeyUp:v,ref:y,required:a}))}}_n.defaultProps={name:"",type:"text",isRequired:!1,taId:"",defaultValue:void 0,value:"",minLength:0,autoFocus:!1,hasError:!1,isDisabled:!1,isHiddenForScreenReaders:!1,useCustomStyle:!1,onBlur(){},onFocus(){},onChange(){},onInput(){},onKeyDown(){}};class En extends l().PureComponent{constructor(e){super(e),f()(this,"handleTogglePasswordVisible",(()=>{const e=!this.state.passwordVisible;this.setState({passwordVisible:e}),this.props.onTogglePasswordVisibility&&this.props.onTogglePasswordVisibility(e)})),this.state={isEditing:!1,passwordVisible:!1},this.handleBlur=this.handleBlur.bind(this),this.handleInput=this.handleInput.bind(this)}handleBlur({target:e,relatedTarget:t}){this.setState({isEditing:!1}),t&&(t.name||"submit"===t.type)&&this.validate(e)}handleInput(){this.setState({isEditing:!0})}validate(e){const{name:t,onValidate:n,noValidate:o}=this.props;!o&&n&&n(t,fn(e))}renderPasswordEyeToggler(){const{type:e}=this.props,{passwordVisible:t}=this.state;return"password"!==e?null:l().createElement(l().Fragment,null,l().createElement("button",{type:"button",onClick:this.handleTogglePasswordVisible,tabIndex:"-1",className:"FormField--passwordEyeIcon "+(t?"passwordVisible":"")}),l().createElement("span",{tabIndex:"-1",className:"FormField--passwordEyeIcon--cross "+(t?"passwordVisible":"")}))}render(){const{error:e={},noValidate:t,label:n,name:o,type:a,value:r,isRequired:s,minLength:i,autoFocus:c,isDisabled:g,onChange:d,onKeyUp:p,onFocus:u,rightIcon:m=null}=this.props,{isEditing:h,passwordVisible:f}=this.state,b=m;let y=a;return"password"===a&&f&&(y="text"),l().createElement("div",{className:mn()("FormField",{"FormField--no-validate":t})},l().createElement(_n,{label:n,name:o,type:y,taId:`${o}-field`,value:r,isRequired:s,minLength:i,autoFocus:c,hasError:!!e.message&&!h,isDisabled:g,onChange:d,onFocus:u,onKeyUp:p,onBlur:this.handleBlur,onInput:this.handleInput}),b&&l().createElement(b,{className:"FormField--rightIcon"}),this.renderPasswordEyeToggler(),!t&&!h&&e.message&&l().createElement(l().Fragment,null,l().createElement(yn,{errorMessage:e.message})))}}const Sn=(0,p.$j)((()=>({})),(()=>({})))(En);var vn=n(7154),kn=n.n(vn);const On=["type","name","label","classes","hasError"];class Cn extends l().PureComponent{constructor(...e){super(...e),this.handleBlur=this.handleBlur.bind(this)}handleBlur(e={}){this.props.onBlur&&this.props.onBlur(e)}render(){const e=this.props,{type:t="text",name:n,label:o,classes:a,hasError:r}=e,s=Pe()(e,On),i=`${n}-field`;return l().createElement("span",{className:a},l().createElement("label",{className:"glue-hidden-visually",htmlFor:i},o),l().createElement("input",kn()({},s,{onBlur:this.handleBlur,type:t,name:n,id:i,"data-ta-id":i,className:mn()("form-control Input",{"Input--has-error":r}),"aria-invalid":!!r,placeholder:o,required:!0})))}}const Pn=(e,t,n)=>{let o=null;return((e,t,n)=>[e,t,n].reduce(((e,t)=>e&&!!t),!0))(e,t,n)?((e,t,n)=>{const o=new Date(n,t-1,e);return o.getDate()===e&&o.getMonth()===t-1&&o.getFullYear()===n})(e,t,n)||(o="invalid"):o="incomplete",o};function In(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Tn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?In(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):In(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const Nn={BIG_ENDIAN:"big",LITTLE_ENDIAN:"little",MIDDLE_ENDIAN:"middle"};class An extends l().PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.monthStrings=[Ot.get("desktop.login.January"),Ot.get("desktop.login.February"),Ot.get("desktop.login.March"),Ot.get("desktop.login.April"),Ot.get("desktop.login.May"),Ot.get("desktop.login.June"),Ot.get("desktop.login.July"),Ot.get("desktop.login.August"),Ot.get("desktop.login.September"),Ot.get("desktop.login.October"),Ot.get("desktop.login.November"),Ot.get("desktop.login.December")],this.handleInput=this.handleInput.bind(this),this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleInput({target:{name:e,value:t,validity:n={}}}){this.setState({isEditing:!0}),n.valueMissing?this.props.onChange(Tn(Tn({},this.props.value),{},{[e]:void 0})):(n.valid||n.rangeUnderflow)&&this.props.onChange(Tn(Tn({},this.props.value),{},{[e]:parseInt(t,10)}))}handleBlur(e){const t=e.relatedTarget?e.relatedTarget.name:null,n=["day","month","year"].includes(t);this.setState({isEditing:n}),n||this.validate()}handleFocus(e){this.setState({isEditing:!0});const t=e.relatedTarget?e.relatedTarget.name:null;!["day","month","year"].includes(t)&&this.props.onFocus&&this.props.onFocus()}validate(){const{day:e,month:t,year:n}=this.props.value,o=Pn(e,t,n,this.props.minAge);this.props.onValidate("birthDate",o)}renderYear(e,t,n){return l().createElement(Cn,{type:"number",name:"year",classes:"FormDate__input FormDate__year",label:Ot.get("desktop.login.Year"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1900,hasError:t.includes("year"),onFocus:this.handleFocus})}renderMonth(e,t,n){return l().createElement("select",{name:"month",id:"month-field",className:mn()("form-control Input FormDate__input FormDate__month",{"Input--has-error":t.includes("month")}),autoFocus:n,defaultValue:e||"",required:!0,onChange:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,onFocus:this.handleFocus},l().createElement("option",{value:"",disabled:!0,hidden:!0},Ot.get("desktop.login.Month")),this.monthStrings.map(((e,t)=>l().createElement("option",{value:t+1,key:t},e))))}renderDay(e,t,n){return l().createElement(Cn,{type:"number",name:"day",classes:"FormDate__input FormDate__day",label:Ot.get("desktop.login.Day"),autoFocus:n,defaultValue:e||"",onInput:this.handleInput,onBlur:this.handleBlur,disabled:this.props.disabled,min:1,max:31,hasError:t.includes("day"),onFocus:this.handleFocus})}render(){const{name:e,label:t,dateEndianness:n,error:o={},autoFocus:a}=this.props,{day:r,month:s,year:i}=this.props.value,{isEditing:c}=this.state,g=["day","month","year"].filter((e=>!(c||!o.message)&&("incomplete"===o.code?!this.props.value[e]:"tooOld"!==o.code||"year"===e)));let d="";return d="big"===Nn[n]?l().createElement("div",{className:"FormDate__inputs"},this.renderYear(i,g,a),this.renderMonth(s,g),this.renderDay(r,g)):"little"===Nn[n]?l().createElement("div",{className:"FormDate__inputs"},this.renderDay(r,g,a),this.renderMonth(s,g),this.renderYear(i,g)):l().createElement("div",{className:"FormDate__inputs"},this.renderMonth(s,g,a),this.renderDay(r,g),this.renderYear(i,g)),l().createElement("div",{className:"FormDate"},l().createElement("label",{className:`FormDate__label ${e}-label`,htmlFor:"month-field"},t),d,!c&&o.message&&l().createElement(l().Fragment,null,l().createElement(yn,{errorMessage:o.message})))}}An.defaultProps={value:{},dateEndianness:"MIDDLE_ENDIAN",minAge:13};const Dn=(0,p.$j)((()=>({})),(()=>({})))(An),Un=["name","label","options","value","showTitle","error","onValidate","onOptionFocus"];class Fn extends l().PureComponent{constructor(e){super(e),this.state={isEditing:!1},this.handleBlur=this.handleBlur.bind(this),this.handleFocus=this.handleFocus.bind(this)}handleBlur(e){this.state={isEditing:!1};(e.relatedTarget?e.relatedTarget.name:null)!==this.props.name&&this.validate(e.target)}handleFocus(e){this.state={isEditing:!0},this.props.onOptionFocus&&e&&e.target&&this.props.onOptionFocus(e.target.value)}validate(e){const{name:t,onValidate:n}=this.props;n&&n(t,fn(e))}render(){const e=this.props,{name:t,label:n,options:o,value:a,showTitle:r,error:s={},onValidate:i,onOptionFocus:c}=e,g=Pe()(e,Un),{isEditing:d}=this.state,p=`${t}-field`,u=mn()("FormRadioSelect",{"FormRadioSelect--is-disabled":this.props.disabled});return l().createElement("div",{className:u},l().createElement("label",{className:r?"":"glue-hidden-visually",htmlFor:p},n),o.map((e=>{const n=`${e.value}-radio`;return l().createElement("span",{className:a===e.value?"checked":"",key:e.value},l().createElement("input",kn()({},g,{name:t,type:"radio",id:n,className:"glue-hidden-visually",value:e.value,checked:a===e.value,onBlur:this.handleBlur,onFocus:this.handleFocus,required:!0,disabled:this.props.disabled})),l().createElement("label",{className:mn()("FormRadioSelect__label",{"FormRadioSelect__label--has-error":!!s.message}),htmlFor:n},e.label))})),!d&&s.message&&l().createElement(l().Fragment,null,l().createElement(yn,{errorMessage:s.message})))}}const Mn=(0,p.$j)((()=>({})),(()=>({})))(Fn);class Ln extends l().PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(e){this.props.isDisabled||this.props.onChange(e.target.checked)}render(){const e=`${this.props.name}-field`,t=mn()("GlueCheckbox",{"GlueCheckbox--is-disabled":this.props.isDisabled});return l().createElement("div",{className:t},l().createElement("input",{className:"GlueCheckbox__input",id:e,name:this.props.name,checked:this.props.isChecked,type:"checkbox",onChange:this.handleChange,disabled:this.props.isDisabled}),l().createElement("label",{className:"GlueCheckbox__label",htmlFor:e,dangerouslySetInnerHTML:{__html:this.props.label}}))}}Ln.defaultProps={label:"",name:"",isChecked:!1,isDisabled:!1,onChange(){}};var Rn=n(9717);class xn extends l().Component{constructor(e){super(e),this.handleClick=this.handleClick.bind(this)}handleClick(e){if(e.target.getAttribute("data-action")){const t=e.target.getAttribute("data-action");"showSettings"===t?this.props.openSettingsPage():"showSignup"===t&&this.props.openSignupPage()}}render(){const e=this.props.errorData,t=e?hn(e.errorCategory,e.errorCode,e.errorReference):null;return t?l().createElement("div",{className:"alert alert-danger ErrorMessage alert-icon",id:"login-message","data-ta-id":"login-message",role:"alert","aria-live":"assertive",onClick:this.handleClick},l().createElement(Rn.w,{iconSize:24}),l().createElement("span",{dangerouslySetInnerHTML:{__html:t}})):null}}const jn=(0,p.$j)((e=>{let{mode:t}=e.app;return"welcome"===t&&(t="signup"),{errorData:e[t]&&e[t].errorData?e[t].errorData:null}}),(e=>({openSettingsPage:()=>e(Wt.enterSettingsMode()),openSignupPage:()=>e(Wt.openSignupPage())})))(xn);class Bn extends l().PureComponent{static getNextId(){const e=(Bn.instanceCount||0)+1;return Bn.instanceCount=e,e}constructor(e){super(e),this.state={tosAgreed:!1,privacyAgreed:!1},this.handleTosChange=this.handleTosChange.bind(this),this.handlePrivacyChange=this.handlePrivacyChange.bind(this),this.handleTosAndPrivacyChange=this.handleTosAndPrivacyChange.bind(this),this.handleEulaChange=this.handleEulaChange.bind(this),this.eulaId=Bn.getNextId()}handleTosChange(e){this.setState({tosAgreed:e},(()=>{this.handleEulaChange()}))}handlePrivacyChange(e){this.setState({privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleTosAndPrivacyChange(e){this.setState({tosAgreed:e,privacyAgreed:e},(()=>{this.handleEulaChange()}))}handleEulaChange(){this.props.onChange(this.state.tosAgreed&&this.state.privacyAgreed)}render(){let e=null;const t=`<a href="https://www.spotify.com/int/legal/end-user-agreement/" target="_new">${Ot.get("desktop.login.TermsAndConditions")}</a>`,n=`<a href="https://www.spotify.com/int/legal/privacy-policy/" target="_new">${Ot.get("desktop.login.PrivacyPolicy")}</a>`,o=Ot.get("desktop.login.SignupButton");return e=this.props.restrictions.pretick_eula?l().createElement("div",null,!this.props.hideTermsAndConditions&&l().createElement("p",{className:"SignupForm__terms-and-conditions",dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.SignupAgree",o,t)}}),!this.props.hidePrivacyPolicy&&l().createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.PrivacyPolicyAgree",n)}})):this.props.restrictions.can_accept_licenses_in_one_step?l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(Ln,{"data-ta-id":"agree-eula",name:`agree-eula-${this.eulaId}`,label:this.props.restrictions.specific_licenses?Ot.get("desktop.login.SignupAgreeCheckboxSpecificLicenses",t,n):Ot.get("desktop.login.SignupAgreeCheckbox",t,n),onChange:this.handleTosAndPrivacyChange,isChecked:this.state.tosAgreed&&this.state.privacyAgreed,isDisabled:this.props.disabled}),this.props.restrictions.specific_licenses&&l().createElement("p",{className:"SignupForm__privacy-policy",dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.PrivacyPolicyAgree",n)}})):l().createElement("div",null,l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(Ln,{"data-ta-id":"agree-tos",name:`agree-tos-${this.eulaId}`,label:Ot.get("desktop.login.TermsOfServiceAgreeCheckbox",t),onChange:this.handleTosChange,isChecked:this.state.tosAgreed,isDisabled:this.props.disabled})),l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(Ln,{"data-ta-id":"agree-privacy",name:`agree-privacy-${this.eulaId}`,label:Ot.get("desktop.login.PrivacyPolicyAgreeCheckbox",n),onChange:this.handlePrivacyChange,isChecked:this.state.privacyAgreed,isDisabled:this.props.disabled}))),l().createElement("div",{className:"EulaAgreement"},e,this.props.error&&l().createElement(l().Fragment,null,l().createElement(yn,{errorMessage:this.props.error.message})))}}const Gn=(0,p.$j)((()=>({})),(()=>({})))(Bn);class Hn extends l().PureComponent{constructor(...e){super(...e),f()(this,"handleClick",(e=>{const{method:t}=this.props;e&&(e.preventDefault(),e.stopPropagation()),this.props.onClick(t)}))}render(){const{type:e,label:t,isDisabled:n,method:o}=this.props,a=o.substr(0,1).toUpperCase()+o.substr(1),r=mn()("button","SocialButton",`${a}Button`,{[`${a}Button--login`]:"login"===e,[`${a}Button--signup`]:"signup"===e});return l().createElement("button",{type:"button",className:r,onClick:this.handleClick,"data-ta-id":`${o}-${e}-button`,disabled:n},t)}}function Wn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function $n(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wn(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class Vn extends l().PureComponent{constructor(e){super(e),f()(this,"handleAgreeEulaChange",(e=>{const t=e?"checked":"unchecked";this.props.onInteraction("signup","click",`eula-change-${t}`),this.setState({eulaAgreed:e,error:e?{}:this.state.error})})),f()(this,"handleOnClick",((...e)=>{(()=>this.state.eulaAgreed||this.props.restrictions.pretick_eula||this.props.hideEula)()?this.props.onClick(...e):this.setState({error:{message:Ot.get("desktop.login.agreeEula.notAccepted")}})})),this.state={eulaAgreed:this.props.restrictions.pretick_eula,error:{}}}render(){return l().createElement("div",{className:"SignupFacebook"},l().createElement(Hn,{method:"facebook",isDisabled:this.props.isDisabled,onClick:this.handleOnClick,type:"signup",label:Ot.get("desktop.login.SignupButtonFacebookNirvana")}),this.props.restrictions.pretick_eula||this.props.hideEula?null:l().createElement(Gn,{restrictions:this.props.restrictions,error:this.state.error,disabled:this.props.isDisabled,onChange:this.handleAgreeEulaChange}))}}f()(Vn,"defaultProps",{isDisabled:!1,hideEula:!1});const zn=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})),(e=>({onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r)),onClick:t=>{const n=sn();e(Wt.signupWithAccounts(t,n)),e(Wt.interaction("signup","click",`create-account-${t}`,null,n))}})),((e,t)=>$n($n($n({},e),t),{},{onClick:e=>{t.onClick(e)}})))(Vn),Kn=({title:e})=>l().createElement("p",{className:"FormTitleSeparator","aria-hidden":"true"},e);Kn.defaultProps={title:""};const Yn=Kn;class qn extends l().PureComponent{constructor(e){super(e),f()(this,"handleEmailValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validateEmail()})),f()(this,"handleEmailFocus",(()=>{this.props.onInteraction("signup","click","input-email")})),f()(this,"handlePasswordValidate",((e,t)=>{this.props.onValidate(e,t),t||this.props.validatePassword()})),f()(this,"handlePasswordFocus",(()=>{this.props.onInteraction("signup","click","input-password")})),f()(this,"handleNameFocus",(()=>{this.props.onInteraction("signup","click","input-name")})),f()(this,"handleGenderOptionFocus",(e=>{this.props.onInteraction("signup","click",`input-gender-${e}`)})),f()(this,"handleInputChange",(({target:{name:e,value:t}})=>{this.props.updateData({[e]:t}),this.setState({isEditing:!0})})),f()(this,"handleBirthDateChange",(e=>{this.props.updateData({birthDate:e})})),f()(this,"handleSendEmailChange",(e=>{this.props.updateData({sendEmail:e})})),f()(this,"handleShareDataChange",(e=>{this.props.updateData({shareData:e})})),f()(this,"handleAgreeEulaChange",(e=>{this.props.updateData({agreeEula:e})})),f()(this,"handleSubmit",(e=>{e&&e.preventDefault();const{step:t}=this.props,n=sn();this.props.onInteraction("signup","click",0===t?"continue":"create-account",null,n),this.setState({isEditing:!1});let o=!0;const a={0:["email","password","name"],1:["birthDate","gender","agreeEula"]};!!this.props.errors&&Object.keys(this.props.errors).filter((e=>-1!==a[t].indexOf(e))).some((e=>this.props.errors[e]&&this.props.errors[e].message))&&(o=!1);const r=e=>t=>{this.props.data[t]||(this.props.onValidate(t,{code:e}),o=!1)};switch(t){case 0:["email","password","name"].forEach(r("valueMissing"));break;case 1:{const{day:e,month:t,year:a}=this.props.data.birthDate;a||this.props.onInteraction("signup","view","show-error-empty-year",null,n),t||this.props.onInteraction("signup","view","show-error-empty-month",null,n),e||this.props.onInteraction("signup","view","show-error-empty-date",null,n);const s=Pn(e,t,a,this.props.restrictions.minimum_age);s&&(this.props.onValidate("birthDate",{code:s}),o=!1),r("valueMissing")("gender"),r("notAccepted")("agreeEula")}}if(o)switch(t){case 0:this.setStep(t+1);break;case 1:this.props.signup(n)}})),f()(this,"handleBack",(()=>{const{step:e}=this.props;this.props.onInteraction("signup","click",`back-step-${e+1}`),this.props.clearAllErrors(),e<=0?this.props.enterWelcomeMode():this.setStep(e-1)})),f()(this,"handleLogin",(()=>{const e=this.props.isWebAuthFlowControl?"open-page-login":"login-web",t=sn();this.props.onInteraction("signup","click",e,null,t),this.props.enterLoginMode(t)})),f()(this,"setStep",(e=>{switch(e){case 0:this.props.enterSignupModeStep0();break;case 1:this.props.enterSignupModeStep1()}})),this.state={isEditing:!0}}renderErrorMsg(){const e=Object.keys(this.props.errors).filter((e=>this.props.errors[e]&&this.props.errors[e].message));return l().createElement("div",{className:"glue-hidden-visually",role:"alert","aria-live":this.state.isEditing?"off":"assertive"},e.length>0?l().createElement("div",null,l().createElement("p",null,Ot.get("desktop.login.email.errorMessageA11y",e.length)),l().createElement("ul",null,e.map((e=>l().createElement("li",{key:e},this.props.errors[e].message))))):null)}renderStep0(){const{data:e,errors:t,isDisabled:n,onValidate:o}=this.props;return l().createElement("div",null,l().createElement(Sn,{name:"email",type:"email",label:Ot.get("desktop.login.SignupEmail"),value:e.email,onChange:this.handleInputChange,isDisabled:n,error:t.email,onValidate:this.handleEmailValidate,onFocus:this.handleEmailFocus,isRequired:!0,autoFocus:!0,rightIcon:dn.w}),l().createElement(Sn,{name:"password",type:"password",label:Ot.get("desktop.login.CreateAPassword"),value:e.password,onChange:this.handleInputChange,minLength:8,isRequired:!0,isDisabled:n,error:t.password,onValidate:this.handlePasswordValidate,onFocus:this.handlePasswordFocus,onTogglePasswordVisibility:e=>{this.props.onInteraction("signup","click",e?"toggle-password-visibility-show":"toggle-password-visibility-hide")}}),l().createElement(Sn,{name:"name",label:Ot.get("desktop.login.SignupName"),value:e.name,onChange:this.handleInputChange,isRequired:!0,isDisabled:n,error:t.name,onValidate:o,rightIcon:pn.K,onFocus:this.handleNameFocus}))}renderStep1(){const{data:e,errors:t,restrictions:n,isDisabled:o,onValidate:a}=this.props;let r=null;n.requires_marketing_opt_in_text?r=l().createElement("div",{className:"SignupForm__send-email-implicit"},Ot.get("desktop.login.SendEmailImplicitLabel")):n.requires_marketing_opt_in&&(r=l().createElement("div",{className:"SignupForm__checkbox-container"},l().createElement(Ln,{name:"send-email",label:Ot.get("desktop.login.SendEmailLabel"),onChange:this.handleSendEmailChange,isChecked:e.sendEmail,isDisabled:o})));const s=[{label:Ot.get("desktop.login.Female"),value:"female"},{label:Ot.get("desktop.login.Male"),value:"male"}];return n.use_all_genders&&s.push({label:Ot.get("desktop.login.NonBinary"),value:"neutral"}),l().createElement("div",null,l().createElement(Dn,{name:"birth-date",label:Ot.get("desktop.login.WhatsYourSignupBirthDate"),value:e.birthDate,onChange:this.handleBirthDateChange,disabled:o,error:t.birthDate,onValidate:a,dateEndianness:n.date_endianness,minAge:n.minimum_age,autoFocus:!0,onFocus:()=>{this.props.onInteraction("signup","click","input-birth-date")}}),l().createElement(Mn,{showTitle:!0,name:"gender",label:Ot.get("desktop.login.WhatsYourSignupGender"),options:s,value:e.gender,onChange:this.handleInputChange,disabled:o,error:t.gender,onValidate:a,onOptionFocus:this.handleGenderOptionFocus}),r,l().createElement(Gn,{restrictions:n,error:t.agreeEula,disabled:o,onChange:this.handleAgreeEulaChange}))}render(){const{isDisabled:e,step:t}=this.props;return l().createElement("form",{onSubmit:this.handleSubmit,className:"SignupForm"},this.renderErrorMsg(),l().createElement(jn,null),0===t?this.renderStep0():"",1===t?this.renderStep1():"",l().createElement("button",{type:"submit",className:"button button-green button-large SignupForm__signup-button",disabled:e,id:"signup-button",onClick:this.handleSubmit,"data-ta-id":"signup-submit"},0===t?Ot.get("desktop.login.Continue"):Ot.get("desktop.login.SignupButton")),0===t&&l().createElement(l().Fragment,null,l().createElement(Yn,{title:Ot.get("desktop.login.SignupOr")}),l().createElement(zn,null)),l().createElement("a",{href:"#",className:"SignupForm__back-button",onClick:this.handleBack},Ot.get("desktop.login.Back")),0===t&&l().createElement("h3",{className:"FooterFormText"},l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"login-link",onClick:this.handleLogin,dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.AlreadyOnSpotifyLogin")}})))}}f()(qn,"defaultProps",{errors:{},data:{},step:0});const Zn=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions,email:e.signup.email,errors:e.signup.errors,data:e.signup.formData,isWebAuthFlowControl:Qt(e.app)})),(e=>({signup:t=>e(Wt.signup(t)),enterLoginMode:()=>e(Wt.enterLoginMode()),enterSignupModeStep0:()=>e(Wt.enterSignupModeStep0()),enterSignupModeStep1:()=>e(Wt.enterSignupModeStep1()),updateData:t=>e(Wt.updateSignupData(t)),validateEmail:()=>e(Wt.validateField("email")),validatePassword:()=>e(Wt.validateField("password")),enterWelcomeMode:()=>e(Wt.enterWelcomeMode()),clearAllErrors:()=>e(Wt.clearAllErrors()),onValidate:(t,n)=>{if(n){const o=n.code||n,a={birthDate:{incomplete:Ot.get("desktop.login.birthDate.incomplete"),invalid:Ot.get("desktop.login.birthDate.invalid")},password:{valueMissing:Ot.get("desktop.login.password.valueMissing"),tooShort:Ot.get("desktop.login.password.tooShort")},email:{valueMissing:Ot.get("desktop.login.email.valueMissing"),typeMismatch:Ot.get("desktop.login.email.typeMismatch")},name:{valueMissing:Ot.get("desktop.login.name.valueMissing")},gender:{valueMissing:Ot.get("desktop.login.gender.valueMissing")},agreeEula:{notAccepted:Ot.get("desktop.login.agreeEula.notAccepted")}};e(Wt.validateFieldFailure(t,{code:o,message:a[t]&&a[t][o]||""}))}else e(Wt.validateFieldSuccess(t))},onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r))})))(qn);class Jn extends l().PureComponent{render(){const{step:e,restrictions:t}=this.props;if(!t)return l().createElement($t,{delay:2e3});const n=0===e?Ot.get("desktop.login.SignupHeroText"):Ot.get("desktop.login.SignupAlmostDone");return l().createElement("main",{className:"Signup","aria-labelledby":"signup-form-title",id:"signup","data-ta-id":"signup-form"},l().createElement("h1",{className:"HeroText",id:"signup-form-title"},n),l().createElement(Zn,{step:e}))}}const Xn=(0,p.$j)((e=>({isDisabled:!!e.signup.isAttempting,restrictions:e.signup.restrictions})))(Jn);class Qn extends l().PureComponent{constructor(...e){super(...e),this.handleChange=this.handleChange.bind(this)}handleChange(){this.props.isDisabled||this.props.onChange(!this.props.isActive)}render(){const{isActive:e,isDisabled:t,labelId:n,taId:o}=this.props;return l().createElement("div",{className:mn()("GlueToggle",{"GlueToggle--is-active":e,"GlueToggle--is-disabled":t})},l().createElement("input",{type:"checkbox",name:n,id:n,className:"glue-hidden-visually",onChange:this.handleChange,checked:e,disabled:t,"data-ta-id":o}),l().createElement("div",{className:"GlueToggle__toggle",onClick:this.handleChange,"aria-hidden":"true"},l().createElement("div",{className:"GlueToggle__toggle-inner"})))}}Qn.defaultProps={isActive:!1,isDisabled:!1,onChange:()=>{}};class eo extends l().PureComponent{render(){const{name:e,label:t,checked:n,disabled:o,onChange:a}=this.props,r=`${e}-field`;return l().createElement("div",{className:"FormToggle"},l().createElement("label",{htmlFor:r,"data-ta-id":"remember-me-label"},t),l().createElement(Qn,{labelId:r,isActive:n,onChange:a,taId:"remember-me-slider",isDisabled:o}))}}class to extends l().PureComponent{constructor(e){super(e),f()(this,"handleForgotPasswordLinkClick",(()=>{this.props.onInteraction("login","click","reset-password")})),this.state={username:this.props.username,password:"",rememberMe:!0},["handleSubmit","handleUsernameChange","handleUsernameFocus","handlePasswordChange","handlePasswordFocus","handleRememberMeChange"].forEach((e=>{this[e]=this[e].bind(this)}))}handleUsernameChange({target:e}){this.setState({username:e.value})}handleUsernameFocus(){this.props.onInteraction("login","click","input-email")}handlePasswordChange({target:e}){this.setState({password:e.value})}handlePasswordFocus(){this.props.onInteraction("login","click","input-password")}handleRememberMeChange(){this.setState({rememberMe:!this.state.rememberMe})}handleSubmit(e){e&&e.preventDefault();const t=this.state.username.trim(),{password:n,rememberMe:o}=this.state,a=sn();this.props.onInteraction("login","click","login-email",null,a),t&&n?this.props.login({username:t,password:n,rememberMe:o},!1,a):t?n||this.props.onInteraction("login","view","show-error-empty-password",null,a):this.props.onInteraction("login","view","show-error-empty-email",null,a)}render(){const{isDisabled:e}=this.props;return l().createElement("form",{onSubmit:this.handleSubmit},l().createElement("h3",{className:"glue-hidden-visually"},Ot.get("desktop.login.LoginWithEmailTitle")),l().createElement(jn,null),l().createElement(Sn,{name:"username",label:Ot.get("desktop.login.LoginUsernameOrEmail"),value:this.state.username||"",onChange:this.handleUsernameChange,onFocus:this.handleUsernameFocus,isDisabled:e,autoFocus:!0,noValidate:!0,rightIcon:dn.w}),l().createElement(Sn,{name:"password",type:"password",label:Ot.get("desktop.login.LoginPassword"),value:this.state.password,onChange:this.handlePasswordChange,onFocus:this.handlePasswordFocus,isDisabled:e,noValidate:!0}),l().createElement("a",{className:"LoginForm__reset-password",href:"https://www.spotify.com/redirect/password-reset",target:"_new",onClick:this.handleForgotPasswordLinkClick},Ot.get("desktop.login.forgotPassLink")),l().createElement(eo,{name:"remember-me",label:Ot.get("desktop.login.RememberMeLabel"),checked:this.state.rememberMe,onChange:this.handleRememberMeChange,disabled:e}),l().createElement("button",{type:"submit",className:"button button-white LoginForm__login-button",disabled:e,id:"login-button","data-ta-id":"login-button"},Ot.get("desktop.login.LoginButton")))}}const no=(0,p.$j)((e=>({isDisabled:!!e.login.loginInProgress,username:e.login.username})),(e=>({login:(t,n,o)=>e(Wt.login(t,n,o)),onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r))})))(to);function oo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oo(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}class ro extends l().PureComponent{componentWillUnmount(){this.props.clearErrors()}handleSignup(){const e=this.props.isWebAuthFlowControl?"open-page-signup":"create-account-web",t=sn();this.props.enterSignupMode(t),this.props.onInteraction("login","click",e,null,t)}getSignupLink(){return this.props.isWebAuthFlowControl?l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignup(),"data-ta-id":"signup-link",dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.DontHaveAnAccountSignup")}}):l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignup(),"data-ta-id":"signup-link"},Ot.get("desktop-auth.login.new-to-spotify")," ",l().createElement("u",null,Ot.get("desktop-auth.login.sign-up")))}render(){const{isDisabled:e}=this.props;return l().createElement("main",{className:"Login","aria-labelledby":"login-form-title",id:"login","data-ta-id":"login-form"},l().createElement("h1",{className:"HeroText",id:"login-form-title"},Ot.get("desktop.login.LoginHeroText")),l().createElement(no,null),l().createElement(Yn,{title:Ot.get("desktop.login.SignupOr")}),l().createElement(Hn,{method:"facebook",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Ot.get("desktop.login.ContinueWithFacebook")}),l().createElement(Hn,{method:"google",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Ot.get("desktop.login.ContinueWithGoogle")}),l().createElement(Hn,{method:"apple",isDisabled:e,onClick:this.props.onSocialButtonClick,type:"login",label:Ot.get("desktop.login.ContinueWithApple")}),l().createElement("h3",{className:"FooterFormText"},this.getSignupLink()))}}const so=(0,p.$j)((e=>({isDisabled:!!e.login.loginInProgress,isWebAuthFlowControl:Qt(e.app)})),(e=>({enterSignupMode:t=>e(Wt.enterSignupMode(t)),onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r)),onSocialButtonClick:t=>{const n=sn();e(Wt.loginWithAccounts(t,n)),e(Wt.interaction("login","click",`login-${t}`,null,n))},clearErrors:()=>e(Wt.loginClearErrors())})),((e,t)=>ao(ao(ao({},e),t),{},{onSocialButtonClick:e=>{t.onSocialButtonClick(e)}})))(ro);class io extends l().PureComponent{render(){const{operationUsed:e}=this.props,t="signup"===e?Ot.get("desktop-auth.login.redirecting-to-browser-signup"):Ot.get("desktop-auth.login.redirecting-to-browser-login");return l().createElement("main",null,l().createElement("h1",{className:"HeroText __redirect"},t))}}const lo=(0,p.$j)((e=>({operationUsed:e.experimentWebAuthReducer.operationUsed})))(io);var co=n(1920);const go={button:"MgL79SorehxR01FG_x8G","button-primary":"pkKz2NFBfAzXEylZSewW","button-secondary":"t5cpZkLic_tfF1qAxBiu","button-outlined":"vFIBKBU6x1uSN5LGVUu1","button-tertiary":"_sxe_D7XZHmFVbGogMjb","btn-block":"MvvYyGgGvtGqAoc6KZUR"},po=e=>l().createElement("button",{id:e.id,className:mn()(go.button,go[`button-${e.version}`],e.className,{[go["btn-block"]]:e.block}),type:"button",onClick:e.onClick,disabled:e.disabled,"aria-label":e.ariaLabel,"aria-hidden":e.standalone,"data-testid":e.testID,title:e.title},e.children);po.defaultProps={onClick:()=>{}};const uo=e=>{const t={className:mn()(go.button,go[`button-${e.version}`],e.className,{[go["btn-block"]]:e.block}),title:e.title,draggable:e.draggable||!1,onClick:e.onClick,"data-testid":e.testID};return e.href?l().createElement("a",kn()({},t,{target:e._blank?"_blank":"_self",href:e.href}),e.children):e.linkTo?l().createElement(co.rU,kn()({},t,{to:e.linkTo}),e.children):l().createElement(po,e,e.children)};po.defaultProps={onClick:()=>{}};const mo="_49W3FGpbPKv8111VMEa",ho=({value:e,id:t,children:n,disabled:o,onSelect:a,className:r,dir:s})=>l().createElement("span",{className:r},l().createElement("select",{className:mo,value:null==e?void 0:e.toString(),id:t,disabled:o,onBlur:()=>{},onChange:e=>{a(e.target.value)},dir:s},n)),fo={horizontalPair:"IEWsjPyGCiQK_IH5nq0g",ProxySettings:"t8ps7owYuNPl39CNMYt6",fullWidth:"_FvdaG70q5NgcqmHk_44",proxyInput:"JKiNxx2LyV_f2zrwJMuI",labelStretch:"fZThNP_ioNtj1YabntQM",restartAppButton:"vNUKL0zlpc4eH5Ywmfpt",title:"_12q5Yk4stbPVGd73E9_"};var bo=n(1124);const yo=({id:e,type:t,placeHolder:n,inputRef:o,handleOnChange:a})=>l().createElement("input",{type:t||"text",id:e,"data-testid":e,className:fo.proxyInput,placeholder:n,ref:o,onChange:a}),wo=({children:e,label:t})=>l().createElement(bo.cw,{label:t},e),_o={isBook:"jUqryKg1Jn7LEy54g_xd",isBold:"t3O1_UyoAi3eYRHDP3LB",isBlack:"_NHb1ROLDjdHEKUOhw8a",isCondensed:"MuvfGFu3n50BkNoi5KO5",bass:"_meqsRRoQONlQfjhfxzp",forte:"_fgOMe1a1aGm_u65R1EI",brio:"lo5DQK9paVE_agAOpSsk",alto:"HnZ4fZrT_hc6RFSnYoJ9",canon:"QfLKaGH1i_Z5VejejiYa",cello:"_Q20A60s8vokf3sUp9vw",ballad:"d7vg_NZ238PPPSLAWecY",balladBold:"GG4lScbAogw4Q_mXWbn9",mesto:"FS85JWWz3ayMxrFzBjRD",mestoBold:"TQQSam9tGsRXGj4aGFSc",metronome:"_ZVIiXCZHso_5Mm8cqs8",finale:"__f_KvmuMkY3V5Ccrj44",finaleBold:"NKRGv6CehstSzbNsxxr8",minuet:"_bgua6bvZNhgL1DN1PVa",minuetBold:"_izo41qKZR2b171s8s2O",viola:"_kd5kutoy5xRha0qD0Vz",violaBold:"MILbw8Hsm3LhSsSJBpVv"};var Eo=n(3012);const So=["color","variant","condensed","weight","className"];function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}let Oo,Co;!function(e){e.bass="bass",e.forte="forte",e.brio="brio",e.alto="alto",e.canon="canon",e.cello="cello",e.ballad="ballad",e.balladBold="balladBold",e.viola="viola",e.violaBold="violaBold",e.mesto="mesto",e.mestoBold="mestoBold",e.metronome="metronome",e.minuet="minuet",e.minuetBold="minuetBold",e.finale="finale",e.finaleBold="finaleBold"}(Oo||(Oo={})),function(e){e.book="book",e.bold="bold",e.black="black"}(Co||(Co={}));const Po=l().forwardRef(((e,t)=>{let{color:n,variant:o=Oo.ballad,condensed:a,weight:r,className:s}=e,i=Pe()(e,So);const c=(e=>void 0!==e&&Object.prototype.hasOwnProperty.call(Eo.$_Y,e))(n)?Eo.$_Y[n]:n,g=_o[o],d=i.as?i.as:"span";return l().createElement(d,kn()({className:mn()(s,{[g]:!!g,[_o.isBook]:r===Co.book,[_o.isBold]:r===Co.bold,[_o.isBlack]:r===Co.black,[_o.isCondensed]:a}),style:{color:c||""},ref:t},i))})),Io=ko(ko(ko({},{h1:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h1",ref:t},e)))),h2:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h2",ref:t},e)))),h3:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h3",ref:t},e)))),h4:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h4",ref:t},e)))),h5:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h5",ref:t},e)))),h6:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"h6",ref:t},e)))),p:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"p",ref:t},e)))),small:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"small",ref:t},e)))),li:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"li",ref:t},e)))),span:l().forwardRef(((e,t)=>l().createElement(Po,kn()({as:"span",ref:t},e))))}),Oo),Co),To=Object.assign(Po,Io),No=(e,t,n)=>{let o=`${e}:${t}`;switch(n){case Ct:o+="@http";break;case Pt:o+="@socks4";break;case It:o+="@socks5"}return o},Ao=({addr:e,mode:t,pass:n,user:o,setValue:a,restartContainer:r,fullWidth:s})=>{const c=(0,i.useRef)(null),g=(0,i.useRef)(null),d=(0,i.useRef)(null),p=(0,i.useRef)(null),[u,m]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[b,y]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const[t,n]=(null==e?void 0:e.split(/[:@]+/))||["",""];m(t),f(n),c.current&&(c.current.value=t),g.current&&(g.current.value=n)}),[e]),(0,i.useEffect)((()=>{p.current&&n&&(p.current.value=n.toString())}),[n]),(0,i.useEffect)((()=>{d.current&&o&&(d.current.value=o.toString())}),[o]);const w=(0,i.useCallback)((({target:e})=>{const n=No(e.value,h,t||0);m(e.value),a("network.proxy.addr",n),y(!0)}),[t,h,a]),_=(0,i.useCallback)((({target:e})=>{const n=No(u,e.value,t||0);f(e.value),a("network.proxy.addr",n),y(!0)}),[t,u,a]),E=(0,i.useCallback)((({target:e})=>{a("network.proxy.user",e.value),y(!0)}),[a]),S=(0,i.useCallback)((({target:e})=>{a("network.proxy.pass",e.value),y(!0)}),[a]),v=0!==t&&1!==t,k=t!==Pt;return l().createElement("div",{className:[fo.ProxySettings,s?fo.fullWidth:""].join(" ")},l().createElement(To,{as:"h2",variant:To.cello,className:fo.title},Ot.get("desktop.settings.proxy.title")),l().createElement(wo,{label:Ot.get("desktop.settings.proxy.type")},l().createElement(ho,{className:fo.secondColumn,id:"network.proxy.mode",value:t,onSelect:e=>{const t=parseInt(e,10);a("network.proxy.mode",t),y(!0)}},Nt.map((({enumKey:e,enumValue:t})=>l().createElement("option",{key:e,value:t,"data-testid":e},Tt[e]?Tt[e].label():""))))),v?l().createElement(l().Fragment,null,l().createElement("div",{className:fo.horizontalPair},l().createElement(wo,{label:Ot.get("desktop.settings.proxy.host")},l().createElement(yo,{id:"network.proxy.host",handleOnChange:w,placeHolder:Ot.get("desktop.settings.proxy.host"),inputRef:c})),l().createElement(wo,{label:Ot.get("desktop.settings.proxy.port")},l().createElement(yo,{id:"network.proxy.port",type:"number",handleOnChange:_,placeHolder:Ot.get("desktop.settings.proxy.port"),inputRef:g}))),l().createElement("div",{className:k?fo.horizontalPair:void 0},l().createElement(wo,{label:Ot.get("desktop.settings.proxy.user")},l().createElement(yo,{id:"network.proxy.user",handleOnChange:E,placeHolder:Ot.get("desktop.settings.proxy.user"),inputRef:d})),k?l().createElement(wo,{label:Ot.get("desktop.settings.proxy.pass")},l().createElement(yo,{id:"network.proxy.pass",handleOnChange:S,placeHolder:Ot.get("desktop.settings.proxy.pass"),type:"password",inputRef:p})):null)):null,b&&l().createElement(uo,{className:fo.restartAppButton,version:"outlined",onClick:r},Ot.get("settings.restartApp")))};function Do(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const Uo=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];const Fo=(0,p.$j)((e=>({settings:{proxy:e.settings.proxy}})),(e=>({fetchProxySettings(){e(Wt.fetchProxySettings())},updateProxySettings(t){e(Wt.updateProxySettings(t))},restartClient(){e(Wt.restartClient())}})))((({settings:e={proxy:{mode:0,address:"",username:"",password:""}},fetchProxySettings:t=(()=>{}),updateProxySettings:n=(()=>{}),restartClient:o=(()=>{})})=>{(0,i.useEffect)((()=>{t()}),[t]);const a=(0,i.useCallback)(((t,o)=>{if(function(e){return!!Uo.includes(e)}(t)){const a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Do(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Do(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e.proxy);switch(t){case"network.proxy.mode":a.mode=o;break;case"network.proxy.addr":a.address=o;break;case"network.proxy.user":a.username=o;break;case"network.proxy.pass":a.password=o}n(a)}return Promise.resolve()}),[e,n]);return l().createElement("main",{className:"Settings","aria-labelledby":"settings-form-title"},l().createElement("h1",{className:"HeroText",id:"settings-form-title"},Ot.get("desktop.login.PreferencesLink")),l().createElement(Ao,{mode:e.proxy.mode,addr:e.proxy.address,user:e.proxy.username,pass:e.proxy.password,setValue:a,restartContainer:o,fullWidth:!0}))}));class Mo extends l().PureComponent{constructor(e){super(e),this.handleSettingsClick=this.goToSettingsPage.bind(this),this.handleBackToLoginClick=this.handleBackToLoginClick.bind(this)}handleSignupClick(){const{isWebAuthFlowSignupVariant:e,openSignupPage:t,onInteraction:n}=this.props,o=e?"create-account-web":"open-page-signup",a=sn();t(a),n("login/welcome","click",o,null,a)}handleBackToLoginClick(e){e.preventDefault(),this.props.openLoginPage(),this.props.onInteraction(this.props.mode,"click","back-to-login")}goToSettingsPage(e){e.preventDefault(),this.props.openSettingsPage(),this.props.onInteraction(this.props.mode,"click","open-page-settings")}renderPreferencesLink(){return l().createElement("a",{className:"Footer__link",href:"#",onClick:this.handleSettingsClick,"data-ta-id":"login-footer-settings"},Ot.get("desktop.login.PreferencesLink"))}renderBackToLoginLink(){return l().createElement("a",{className:"Footer__link",href:"#",onClick:this.handleBackToLoginClick,"data-ta-id":"login-footer-settings-back-to-login"},Ot.get("desktop.login.Back"))}renderTryAgain(){return l().createElement(l().Fragment,null,l().createElement("span",null,Ot.get("desktop-auth.login.not-seeing-browser"))," ",l().createElement("a",{href:"#",onClick:()=>this.props.tryAgainHandler()},Ot.get("desktop-auth.login.try-again")))}renderSignupLink(){const{isWebAuthFlowControl:e}=this.props;return e?l().createElement("a",{className:"Footer__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignupClick(),"data-ta-id":"welcome-signup-link",dangerouslySetInnerHTML:{__html:Ot.get("desktop.login.DontHaveAnAccountSignup")}}):l().createElement(l().Fragment,null,Ot.get("desktop-auth.login.new-to-spotify")," ",l().createElement("a",{className:"FooterFormText__NoUnderline",href:"#",id:"signup-link",onClick:()=>this.handleSignupClick(),"data-ta-id":"signup-link"},Ot.get("desktop-auth.login.sign-up")))}render(){const{mode:e}=this.props;return l().createElement("footer",{className:"Footer",role:"contentinfo"},"login"===e&&this.renderPreferencesLink(),"settings"===e&&this.renderBackToLoginLink(),"open-browser"===e&&this.renderTryAgain(),"welcome"===e&&this.renderSignupLink())}}const Lo=(0,p.$j)((e=>({isWebAuthFlowControl:Qt(e.app),isWebAuthFlowSignupVariant:Xt(e.app)})),(e=>({tryAgainHandler:()=>{e(Wt.abortLoginWithAccounts()),e(Wt.enterWelcomeMode())},openLoginPage:()=>{e(Wt.enterLoginMode())},openSignupPage:t=>e(Wt.enterSignupMode(t)),openSettingsPage:()=>e(Wt.enterSettingsMode()),onInteraction:(t,n,o,a,r)=>e(Wt.interaction(t,n,o,a,r))})))(Mo);class Ro extends l().PureComponent{render(){return l().createElement("header",{className:"Header"},l().createElement("h1",{className:"glue-hidden-visually"},"Spotify"),l().createElement("img",{className:"Header__logo",src:"images/logo.svg",alt:""}))}}var xo=n(1226),jo=n(5989);class Bo extends l().Component{renderFakeWebPlayer(){return l().createElement("div",{className:"fakeWebPlayer"},l().createElement("aside",null),l().createElement("footer",null,l().createElement("div",{className:"fakeWebPlayer__footer-left"}),l().createElement("div",{className:"fakeWebPlayer__footer-center"}),l().createElement("div",{className:"fakeWebPlayer__footer-right"})),l().createElement("main",null,l().createElement("div",{className:"fakeWebPlayer__content"})))}render(){const{loading:e,mode:t,loggedIn:n,previousMode:o,throbberDelay:a,remoteConfigProps:r,signupStep:s,previousSignupStep:i}=this.props;if(e||!t||!r)return l().createElement($t,{delay:a});if(n)return null;let c=o?`__${t} __${o}-to-${t}`:"";return"signup"===t&&Number.isInteger(i)&&(c+=` __signup_step_${i}_to_${s}`),l().createElement("main",{className:"App",key:"main1","data-ta-id":"login-app","data-ta-login-mode":t},this.renderFakeWebPlayer(),l().createElement("div",{className:`App__content ${c}`},l().createElement(jo.Z,{mode:"in-out"},l().createElement(xo.Z,{timeout:{appear:0,enter:0,exit:650},key:c},l().createElement("div",{className:`App__modal ${c}`},l().createElement(Ro,null),"welcome"===t&&l().createElement(gn,null),"signup"===t&&l().createElement(Xn,{step:s}),"login"===t&&l().createElement(so,null),"open-browser"===t&&l().createElement(lo,null),"settings"===t&&l().createElement(Fo,null),l().createElement(Lo,{mode:t}))))))}}f()(Bo,"defaultProps",{throbberDelay:0,transitionLeaveTimeout:0});const Go=(0,p.$j)((e=>({mode:e.app.mode,previousMode:e.app.previousMode,remoteConfigProps:e.app.remoteConfigProps,signupStep:e.signup.step,previousSignupStep:e.signup.previousStep,loading:!!e.login.loading,loggedIn:!!e.login.loggedIn,throbberDelay:e.login.throbberDelay,transitionLeaveTimeout:e.login.redirectDelay})))(Bo);var Ho=n(3828),Wo=n(3894);const $o=rn().create().toString(),Vo="has-used-app",zo=!window.localStorage.getItem(Vo);zo&&window.localStorage.setItem(Vo,!0);const Ko=()=>{const e=V.getItem("utmParameters");let t;try{t=e?JSON.parse(e).referral:""}catch(e){t=""}return t};var Yo=n(840),qo=n(1245),Zo=n.n(qo);let Jo=null;let Xo=null;var Qo=n(9798);async function ea(e,{page:t}){return ta(e,{page:t,action_type:"pageview",action_intent:""})}async function ta(e,{page:t,action_type:n,action_intent:o,item_id:a,action_hash:r}){const s=function(){if(null===Jo)throw new Error("Missing `instance`. Have you called `setRemoteConfigInstance` yet?");return Jo}();try{await s.activationPromise}catch(e){}(function(){if(null===Xo)throw new Error("Missing `instance`. Have you called `setEventSenderInstance` yet?");return Xo})().send((0,Qo.e)({action_type:n,action_intent:o,action_page:t,action_item_id:a,action_hash:r,device_is_new_install:zo,device_locale:window.__spotify.locale,device_referrer:Ko(),ab_flags:je(e.getState()),session_id:$o}),{authorize:!1})}function na(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}const oa=e=>{window.location.href=e};function aa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?aa(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const sa={errorMessage:null};const ia=function(e=sa,t){var n;switch(t.type){case Wt.ENTER_SIGNUP_MODE:return ra(ra({},e),{},{previousMode:e.mode,mode:Xt(e)?"open-browser":"signup"});case Wt.ENTER_LOGIN_MODE:return ra(ra({},e),{},{previousMode:e.mode,mode:Jt(e)?"open-browser":"login"});case Wt.COUNTRY_NOT_LAUNCHED:return ra(ra({},e),{},{previousMode:e.mode,mode:"login"});case Wt.ENTER_WELCOME_MODE:return ra(ra({},e),{},{previousMode:e.mode,mode:"welcome",errorMessage:null!==(n=t.errorMessage)&&void 0!==n?n:null});case Wt.ENTER_SETTINGS_MODE:return ra(ra({},e),{},{previousMode:e.mode,mode:"settings"});case Wt.REMOTE_CONFIG_PROPS:{if(xe())return ra(ra({},e),{},{remoteConfigProps:{},_IGNORED_ON_TEAM_CITY_remoteConfigProps:t.props});let n={};try{n=localStorage.remoteConfigPropsOverrides&&JSON.parse(localStorage.remoteConfigPropsOverrides)||{}}catch(e){n={}}return ra(ra({},e),{},{remoteConfigProps:ra(ra({},t.props),n)})}default:return e}};function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ca(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?la(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ga={proxy:{mode:0,address:"",username:"",password:""}};const da=function(e=ga,t){return function(e){return e.type===Wt.SETTINGS_FETCH_PROXY_SETTINGS_SUCCESS}(t)?ca(ca({},e),{},{proxy:{mode:t.data.mode,address:t.data.address,username:t.data.username,password:t.data.password}}):e};function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ua(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const ma={step:0,isAttempting:!1,isSuccessful:void 0,errors:{},errorData:{},validated:{},formData:{name:"",email:"",password:"",birthDate:{day:void 0,month:void 0,year:void 0},gender:void 0,sendEmail:void 0,shareData:void 0,agreeEula:!1},restrictions:void 0};const ha=function(e=ma,t){switch(t.type){case Wt.ENTER_SIGNUP_MODE_STEP_0:return ua(ua({},e),{},{previousStep:e.step,step:0});case Wt.ENTER_SIGNUP_MODE_STEP_1:return ua(ua({},e),{},{previousStep:e.step,step:1});case Wt.SIGNUP_RESTRICTIONS_SUCCESS:return ua(ua({},e),{},{formData:ua(ua({},e.formData),{},{sendEmail:!!t.restrictions.requires_marketing_opt_in_text||void 0,agreeEula:!!t.restrictions.pretick_eula}),restrictions:t.restrictions});case Wt.SIGNUP_RESTRICTIONS_FAILURE:return ua(ua({},e),{},{errorData:t.error});case Wt.SIGNUP_ATTEMPT:return ua(ua({},e),{},{isAttempting:!0,errorData:null});case Wt.SIGNUP_SUCCESS:return ua(ua({},e),{},{isAttempting:!0,isSuccessful:!0,errorData:null});case Wt.SIGNUP_FAILURE:return ua(ua({},e),{},{isAttempting:!1,isSuccessful:!1,errors:t.errors,errorData:null});case Wt.FACEBOOK_SIGNUP_ATTEMPT:return ua(ua({},e),{},{errorData:null,errors:{}});case Wt.FACEBOOK_SIGNUP_FAILURE:return ua(ua({},e),{},{errorData:t.errorData});case Wt.VALIDATE_FIELD_ATTEMPT:return ua(ua({},e),{},{errors:ua(ua({},e.errors),{},{[t.field]:void 0})});case Wt.VALIDATE_FIELD_FAILURE:return ua(ua({},e),{},{errors:ua(ua({},e.errors),{},{[t.field]:t.error}),validated:ua(ua({},e.validated),{},{[t.field]:!1})});case Wt.VALIDATE_FIELD_SUCCESS:return ua(ua({},e),{},{errors:ua(ua({},e.errors),{},{[t.field]:void 0}),validated:ua(ua({},e.validated),{},{[t.field]:!0})});case Wt.UPDATE_SIGNUP_DATA:{const n={};for(const e of Object.keys(t.data))n[e]=void 0;return ua(ua({},e),{},{errors:ua(ua({},e.errors),n),formData:ua(ua({},e.formData),t.data)})}case Wt.CLEAR_ALL_ERRORS:return ua(ua({},e),{},{errors:{}});default:return e}};const fa=(0,Ho.MT)((0,Ho.UY)({app:ia,login:ee,settings:da,signup:ha,experimentWebAuthReducer:on}),void 0,(0,Ho.md)(Wo.Z,(e=>t=>n=>{const o=t(n);switch(n.type){case Wt.START_APP:e.dispatch(Wt.fetchUTMParameters()),e.dispatch(Wt.getSignupRestrictions());break;case Wt.LOGIN_FAIL:{const t=e.getState();if(n.loginType===Wt.LOGIN_TYPE_AUTOLOGIN){const n=t.app.mode;"welcome"===n?e.dispatch(Wt.enterWelcomeMode()):"login"===n?e.dispatch(Wt.enterLoginMode()):"signup"===n&&e.dispatch(Wt.enterSignupMode())}else{if("open-browser"===t.app.mode){const o=n.errorData;let a=hn(o.errorCategory,o.errorCode,o.errorReference);"desktop_login_accounts"===o.errorCategory&&4===o.errorCode&&(a="signup"===t.experimentWebAuthReducer.operationUsed?Ot.get("desktop-auth.login.signup-time-out"):Ot.get("desktop-auth.login.login-time-out")),a?e.dispatch(Wt.enterWelcomeMode(a)):e.dispatch(Wt.enterWelcomeMode())}}break}case Wt.ENTER_SIGNUP_MODE:{const t=e.getState().signup.restrictions;t?!1===t.is_country_launched&&e.dispatch(Wt.countryNotLaunched()):e.dispatch(Wt.getSignupRestrictions());break}case Wt.SIGNUP_RESTRICTIONS_SUCCESS:!1===n.restrictions.is_country_launched&&e.dispatch(Wt.countryNotLaunched());break;case Wt.SIGNUP_FAILURE:(n.errors.email||n.errors.password||n.errors.displayname)&&e.dispatch(Wt.enterSignupModeStep0());break;case Wt.COUNTRY_NOT_LAUNCHED:e.dispatch(Wt.openSignupPage(!0));break;case Wt.REMOTE_CONFIG_PROPS:{const t=!V.getItem("lastUsername"),n=e.getState().app;t||!Qt(n)&&!(e=>zt===Zt(e))(n)?e.dispatch(Wt.enterWelcomeMode()):e.dispatch(Wt.enterLoginMode())}}return o}),(e=>t=>n=>{const o=t(n);switch(n.type){case Wt.ENTER_LOGIN_MODE:ea(e,{page:"login"});break;case Wt.LOGIN_SUCCESS:n.loginType===Wt.LOGIN_TYPE_EMAIL?ta(e,{page:"login",action_type:"view",action_intent:"show-success-login-email"}):n.loginType===Wt.LOGIN_TYPE_FACEBOOK&&ta(e,{page:"login",action_type:"view",action_intent:"show-success-login-facebook"});break;case Wt.LOGIN_FAIL:n.loginType===Wt.LOGIN_TYPE_EMAIL?n.errorData&&3===n.errorData.errorCode&&ta(e,{page:"login",action_type:"view",action_intent:"show-error-invalid-credential"}):n.loginType===Wt.LOGIN_TYPE_FACEBOOK&&ta(e,{page:"login",action_type:"view",action_intent:"show-error-login-facebook"});break;case Wt.ENTER_SIGNUP_MODE:ea(e,{page:"signup"});break;case Wt.ENTER_SIGNUP_MODE_STEP_0:ta(e,{page:"signup",action_type:"view",action_intent:"show-signup-step-one"});break;case Wt.ENTER_SIGNUP_MODE_STEP_1:ta(e,{page:"signup",action_type:"view",action_intent:"show-signup-step-two"});break;case Wt.SIGNUP_SUCCESS:ta(e,{page:"signup",action_type:"view",action_intent:"show-success-signup-email"});break;case Wt.SIGNUP_FAILURE:ta(e,{page:"signup",action_type:"view",action_intent:"show-error-signup-email",item_id:n.errors&&Object.keys(n.errors).join("|")});break;case Wt.FACEBOOK_SIGNUP_SUCCESS:ta(e,{page:"signup",action_type:"view",action_intent:"show-success-authentication-facebook"});break;case Wt.FACEBOOK_SIGNUP_FAILURE:ta(e,{page:"signup",action_type:"view",action_intent:"show-error-authentication-facebook",item_id:n.errorData&&`${n.errorData.errorCode} - ${n.errorData.errorDescription}`});break;case Wt.ENTER_WELCOME_MODE:ea(e,{page:"login/welcome"});break;case Wt.ENTER_SETTINGS_MODE:ea(e,{page:"login/settings"});break;case Wt.INTERACTION:ta(e,{page:n.page,action_type:n.interactionType,action_intent:n.intent,item_id:n.itemId,action_hash:n.actionHash});break;case Wt.VALIDATE_FIELD_FAILURE:if(n.error){const t=n.field,o=n.error.code;let a=null,r=null;"valueMissing"===o?a=`show-error-empty-${t}`:["incomplete","invalid","typeMismatch","tooShort"].includes(o)?a=`show-error-format-${t}`:(a=`show-error-${t}`,r=n.error.message||""),null!==a&&ta(e,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?na(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):na(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({page:"signup",action_type:"view",action_intent:a},r?{item_id:r}:{}))}}return o}),(()=>e=>t=>{const n=e(t);if(!t.redirectTo)return n;let o;return"xpui"!==t.redirectTo||(o="spotify:app:xpui",t.redirectDelay?setTimeout((()=>{oa(o)}),t.redirectDelay):oa(o)),n}),(e=>t=>n=>{const o=e.getState().app;return Qt(o)||(((e,t)=>e===Wt.ENTER_LOGIN_MODE&&Jt(t))(n.type,o)&&e.dispatch(Wt.loginWithAccounts("",n.actionHash)),((e,t)=>e===Wt.ENTER_SIGNUP_MODE&&Xt(t))(n.type,o)&&e.dispatch(Wt.signupWithAccounts("",n.actionHash))),t(n)})));fa.subscribe((()=>{const e=fa.getState();e.login.username&&localStorage.setItem(Y,e.login.username),e.login.utmParameters&&localStorage.setItem(Z,JSON.stringify(e.login.utmParameters))}));const ba=fa;var ya=n(2585),wa=n(3626);let _a=null;var Ea=n(349),Sa=n(4978);(async function(){const e=window.__spotify.locale,t=await fetch(`i18n/${e}.json`).then((e=>e.json()));Ot.setLocale(e),Ot.setDictionary(t)})().then((async function(){const e=function(){const e=(0,wa.qy)({providers:{endpoints:(0,wa.uG)(),token:()=>null}});return e.connect(),e}();_a=e;const t=((e,t,n)=>{if("event_sender_context_information"in e){const o=e.event_sender_context_information;return(0,Ea.mi)({transport:t,suppressPersist:!1,context:[(0,Sa.UR)({version:o.client_version_string}),(0,Sa.jx)(n),(0,Sa.IE)(o.installation_id),(0,Sa.Hv)({name:o.platform_type,version:o.os_version})]})}return(0,Ea.mi)({transport:t,suppressPersist:!1,context:[(0,Sa.jx)(n),(0,Sa.UR)({version:e.client_version_quadruple}),(0,Sa.IE)(e.event_sender_installation_id_hex),(0,Sa.Hv)({name:e.os_name,version:e.os_version})]})})(window.__spotify,e,"65b708073fc0480ea92a077233ca87bd");!function(e){Xo=e}(t);const n=function(e,t,n={},o=!0){let a,r={};try{var s;r=JSON.parse(null!==(s=localStorage.getItem("rcOverrides"))&&void 0!==s?s:"{}")}catch(e){}a="event_sender_context_information"in __spotify?__spotify.event_sender_context_information.installation_id:__spotify.event_sender_installation_id_hex;const i=new Yo.ZP({clientId:"open3",installationId:a,storage:o?void 0:null,timeout:3e3,properties:Zo(),propertyOverrides:r,transport:e,eventSender:t});return i.resolve(n),i}(e,t,{},!1);!function(e){Jo=e}(n),n.activationPromise.then((()=>{ba.dispatch(Wt.remoteConfigProps(n.getPropertiesAsObject()))})).catch((()=>{ba.dispatch(Wt.remoteConfigProps({}))})),m.attach(),m.update(),u.attach();const o=document.location.search,a=new RegExp(`\\?param=error-code\\${encodeURIComponent("=")}([0-9]+)`,"i");window.addEventListener("message",(e=>{"critical-update-error"===e.data&&ba.dispatch(Wt.loginFailed({errorCode:e.data}))}));const r=o.match(a);if(o&&r){const e=+r[1];ba.dispatch(Wt.loginFailed({errorCode:e}))}let s="linux";window.navigator.platform.startsWith("Mac")&&(s="mac"),window.navigator.platform.startsWith("Win")&&(s="windows"),document.body.classList.add(`body-container--${s}`),g().render(l().createElement(d.zj,null,l().createElement(p.zt,{store:ba},l().createElement(Go,null))),document.getElementById("main")),ba.dispatch(Wt.startApp()),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr");const i={[ya.PLATFORM_UNKNOWN]:"body-container--unknown-os",[ya.PLATFORM_MAC]:"body-container--mac",[ya.PLATFORM_WINDOWS]:"body-container--windows"},c=(0,ya.getPlatform)();document.body.classList.add(i[c])}))},2585:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PLATFORM_UNKNOWN:()=>o,PLATFORM_MAC:()=>a,PLATFORM_WINDOWS:()=>r,isMac:()=>s,isWindows:()=>i,getPlatform:()=>l});const o=Symbol("PLATFORM_UNKNOWN"),a=Symbol("PLATFORM_MAC"),r=Symbol("PLATFORM_WINDOWS");function s(){return window.navigator.platform.startsWith("Mac")}function i(){return window.navigator.platform.startsWith("Win")}function l(){return s()?a:i()?r:o}},2976:(e,t)=>{let n=!1;t.update=()=>{},t.attach=()=>{if(n)return;n=!0;const e=window.__spotify&&window.__spotify.locale;e&&document.documentElement.setAttribute("lang",e)},t.detach=()=>{n&&(n=!1,document.documentElement.removeAttribute("lang"))}},685:(e,t,n)=>{const{getPlatform:o,PLATFORM_UNKNOWN:a,PLATFORM_MAC:r,PLATFORM_WINDOWS:s}=n(2585);let i=!1,l="always-visible",c=0;const g={[a]:"linux",[r]:"mac",[s]:"windows"};let d=g[a];function p(){const e=[...document.querySelectorAll("*")],t=[],n=["scroll","auto","overlay"];e.forEach((e=>{const o=window.getComputedStyle(e),a=o.overflowX,r=o.overflowY;n.includes(a)&&t.push({node:e,property:"overflow-x"}),n.includes(r)&&t.push({node:e,property:"overflow-y"})}));const o=document.createElement("style");o.innerHTML="\n    html::-webkit-scrollbar,\n    body::-webkit-scrollbar {\n      background-color: rgba(1, 2, 3, 0) !important;\n    }\n  ".trimRight();const a=`data-scrollbar-fix-${++c}-id`;let r=0;t.forEach((({node:e,property:t})=>{if(e!==document.body){const n=++r;e.setAttribute(a,n),o.innerHTML+=`\n    [${a}="${n}"] { ${t}: hidden !important; }`}})),document.head.appendChild(o),setTimeout((()=>{document.head.removeChild(o),t.forEach((({node:e})=>{e.removeAttribute(a)}))}),0)}t.performScrollBarFix=p,t.update=function(){},t.attach=function(){if(i)return;i=!0;const e=window.__spotify&&window.__spotify.scroller_style;l="overlay"===e?"overlay":"always-visible";const t=o();d=g[t],"always-visible"===l||"mac"!==d?(document.body.classList.remove("scrollbar-style-when-scrolling-mac"),document.body.classList.add(`scrollbar-style-visible-${d}`)):(document.body.classList.remove(`scrollbar-style-visible-${d}`),document.body.classList.add("scrollbar-style-when-scrolling-mac")),window.addEventListener("message",(e=>{"set_active"===e.data.name&&e.data.active&&p()}))},t.detach=function(){i&&(i=!1,c=0)}},4986:(e,t,n)=>{"use strict";n.d(t,{lX:()=>w,q_:()=>k,PP:()=>C,ob:()=>p,Ep:()=>d});var o=n(7462),a=n(8273),r=n(5429),s=n(2177);function i(e){return"/"===e.charAt(0)?e:`/${e}`}function l(e){return"/"===e.charAt(0)?e.substr(1):e}function c(e,t){return function(e,t){return new RegExp(`^${t}(\\/|\\?|#|$)`,"i").test(e)}(e,t)?e.substr(t.length):e}function g(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function d(e){const t=e.pathname,n=e.search,o=e.hash;let a=t||"/";return n&&"?"!==n&&(a+="?"===n.charAt(0)?n:`?${n}`),o&&"#"!==o&&(a+="#"===o.charAt(0)?o:`#${o}`),a}function p(e,t,n,r){let s;"string"==typeof e?(s=function(e){let t=e||"/",n="",o="";const a=t.indexOf("#");-1!==a&&(o=t.substr(a),t=t.substr(0,a));const r=t.indexOf("?");return-1!==r&&(n=t.substr(r),t=t.substr(0,r)),{pathname:t,search:"?"===n?"":n,hash:"#"===o?"":o}}(e),s.state=t):(s=(0,o.Z)({},e),void 0===s.pathname&&(s.pathname=""),s.search?"?"!==s.search.charAt(0)&&(s.search=`?${s.search}`):s.search="",s.hash?"#"!==s.hash.charAt(0)&&(s.hash=`#${s.hash}`):s.hash="",void 0!==t&&void 0===s.state&&(s.state=t));try{s.pathname=decodeURI(s.pathname)}catch(e){}return n&&(s.key=n),r?s.pathname?"/"!==s.pathname.charAt(0)&&(s.pathname=(0,a.Z)(s.pathname,r.pathname)):s.pathname=r.pathname:s.pathname||(s.pathname="/"),s}function u(){let e=null;let t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,o,a){if(null!=e){const r="function"==typeof e?e(t,n):e;"string"==typeof r?"function"==typeof o?o(r,a):a(!0):a(!1!==r)}else a(!0)},appendListener:function(e){let n=!0;function o(){n&&e.apply(void 0,arguments)}return t.push(o),function(){n=!1,t=t.filter((function(e){return e!==o}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),o=0;o<e;o++)n[o]=arguments[o];t.forEach((function(e){return e.apply(void 0,n)}))}}}const m=!("undefined"==typeof window||!window.document||!window.document.createElement);function h(e,t){t(window.confirm(e))}const f="popstate",b="hashchange";function y(){try{return window.history.state||{}}catch(e){return{}}}function w(e){void 0===e&&(e={}),m||(0,s.Z)(!1);const t=window.history,n=function(){const e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),a=!(-1===window.navigator.userAgent.indexOf("Trident")),r=e,l=r.forceRefresh,w=void 0!==l&&l,_=r.getUserConfirmation,E=void 0===_?h:_,S=r.keyLength,v=void 0===S?6:S,k=e.basename?g(i(e.basename)):"";function O(e){const t=e||{},n=t.key,o=t.state,a=window.location;let r=a.pathname+a.search+a.hash;return k&&(r=c(r,k)),p(r,o,n)}function C(){return Math.random().toString(36).substr(2,v)}const P=u();function I(e){(0,o.Z)(B,e),B.length=t.length,P.notifyListeners(B.location,B.action)}function T(e){(function(e){void 0===e.state&&navigator.userAgent.indexOf("CriOS")})(e)||D(O(e.state))}function N(){D(O(y()))}let A=!1;function D(e){if(A)A=!1,I();else{const t="POP";P.confirmTransitionTo(e,t,E,(function(n){n?I({action:t,location:e}):function(e){const t=B.location;let n=F.indexOf(t.key);-1===n&&(n=0);let o=F.indexOf(e.key);-1===o&&(o=0);const a=n-o;a&&(A=!0,L(a))}(e)}))}}const U=O(y());var F=[U.key];function M(e){return k+d(e)}function L(e){t.go(e)}let R=0;function x(e){R+=e,1===R&&1===e?(window.addEventListener(f,T),a&&window.addEventListener(b,N)):0===R&&(window.removeEventListener(f,T),a&&window.removeEventListener(b,N))}let j=!1;var B={length:t.length,action:"POP",location:U,createHref:M,push:function(e,o){const a="PUSH",r=p(e,o,C(),B.location);P.confirmTransitionTo(r,a,E,(function(e){if(!e)return;const o=M(r),s=r.key,i=r.state;if(n)if(t.pushState({key:s,state:i},null,o),w)window.location.href=o;else{const e=F.indexOf(B.location.key),t=F.slice(0,-1===e?0:e+1);t.push(r.key),F=t,I({action:a,location:r})}else window.location.href=o}))},replace:function(e,o){const a="REPLACE",r=p(e,o,C(),B.location);P.confirmTransitionTo(r,a,E,(function(e){if(!e)return;const o=M(r),s=r.key,i=r.state;if(n)if(t.replaceState({key:s,state:i},null,o),w)window.location.replace(o);else{const e=F.indexOf(B.location.key);-1!==e&&(F[e]=r.key),I({action:a,location:r})}else window.location.replace(o)}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);const t=P.setPrompt(e);return j||(x(1),j=!0),function(){return j&&(j=!1,x(-1)),t()}},listen:function(e){const t=P.appendListener(e);return x(1),function(){x(-1),t()}}};return B}const _="hashchange",E={hashbang:{encodePath:function(e){return"!"===e.charAt(0)?e:`!/${l(e)}`},decodePath:function(e){return"!"===e.charAt(0)?e.substr(1):e}},noslash:{encodePath:l,decodePath:i},slash:{encodePath:i,decodePath:i}};function S(){const e=window.location.href,t=e.indexOf("#");return-1===t?"":e.substring(t+1)}function v(e){const t=window.location.href.indexOf("#");window.location.replace(`${window.location.href.slice(0,t>=0?t:0)}#${e}`)}function k(e){void 0===e&&(e={}),m||(0,s.Z)(!1);const t=window.history,n=(window.navigator.userAgent.indexOf("Firefox"),e),a=n.getUserConfirmation,l=void 0===a?h:a,f=n.hashType,b=void 0===f?"slash":f,y=e.basename?g(i(e.basename)):"",w=E[b],k=w.encodePath,O=w.decodePath;function C(){let e=O(S());return y&&(e=c(e,y)),p(e)}const P=u();function I(e){(0,o.Z)(B,e),B.length=t.length,P.notifyListeners(B.location,B.action)}let T=!1,N=null;function A(){const e=S(),t=k(e);if(e!==t)v(t);else{const e=C(),t=B.location;if(!T&&(o=e,(n=t).pathname===o.pathname&&n.search===o.search&&n.hash===o.hash&&n.key===o.key&&(0,r.Z)(n.state,o.state)))return;if(N===d(e))return;N=null,function(e){if(T)T=!1,I();else{const t="POP";P.confirmTransitionTo(e,t,l,(function(n){n?I({action:t,location:e}):function(e){const t=B.location;let n=M.lastIndexOf(d(t));-1===n&&(n=0);let o=M.lastIndexOf(d(e));-1===o&&(o=0);const a=n-o;a&&(T=!0,L(a))}(e)}))}}(e)}var n,o}const D=S(),U=k(D);D!==U&&v(U);const F=C();var M=[d(F)];function L(e){t.go(e)}let R=0;function x(e){R+=e,1===R&&1===e?window.addEventListener(_,A):0===R&&window.removeEventListener(_,A)}let j=!1;var B={length:t.length,action:"POP",location:F,createHref:function(e){return`#${k(y+d(e))}`},push:function(e,t){const n="PUSH",o=p(e,void 0,void 0,B.location);P.confirmTransitionTo(o,n,l,(function(e){if(!e)return;const t=d(o),a=k(y+t);if(S()!==a){N=t,function(e){window.location.hash=e}(a);const e=M.lastIndexOf(d(B.location)),r=M.slice(0,-1===e?0:e+1);r.push(t),M=r,I({action:n,location:o})}else I()}))},replace:function(e,t){const n="REPLACE",o=p(e,void 0,void 0,B.location);P.confirmTransitionTo(o,n,l,(function(e){if(!e)return;const t=d(o),a=k(y+t);S()!==a&&(N=t,v(a));const r=M.indexOf(d(B.location));-1!==r&&(M[r]=t),I({action:n,location:o})}))},go:L,goBack:function(){L(-1)},goForward:function(){L(1)},block:function(e){void 0===e&&(e=!1);const t=P.setPrompt(e);return j||(x(1),j=!0),function(){return j&&(j=!1,x(-1)),t()}},listen:function(e){const t=P.appendListener(e);return x(1),function(){x(-1),t()}}};return B}function O(e,t,n){return Math.min(Math.max(e,t),n)}function C(e){void 0===e&&(e={});const t=e,n=t.getUserConfirmation,a=t.initialEntries,r=void 0===a?["/"]:a,s=t.initialIndex,i=void 0===s?0:s,l=t.keyLength,c=void 0===l?6:l,g=u();function m(e){(0,o.Z)(_,e),_.length=_.entries.length,g.notifyListeners(_.location,_.action)}function h(){return Math.random().toString(36).substr(2,c)}const f=O(i,0,r.length-1),b=r.map((function(e){return p(e,void 0,"string"==typeof e?h():e.key||h())})),y=d;function w(e){const t=O(_.index+e,0,_.entries.length-1),o=_.entries[t];g.confirmTransitionTo(o,"POP",n,(function(e){e?m({action:"POP",location:o,index:t}):m()}))}var _={length:b.length,action:"POP",location:b[f],index:f,entries:b,createHref:y,push:function(e,t){const o="PUSH",a=p(e,t,h(),_.location);g.confirmTransitionTo(a,o,n,(function(e){if(!e)return;const t=_.index+1,n=_.entries.slice(0);n.length>t?n.splice(t,n.length-t,a):n.push(a),m({action:o,location:a,index:t,entries:n})}))},replace:function(e,t){const o="REPLACE",a=p(e,t,h(),_.location);g.confirmTransitionTo(a,o,n,(function(e){e&&(_.entries[_.index]=a,m({action:o,location:a}))}))},go:w,goBack:function(){w(-1)},goForward:function(){w(1)},canGo:function(e){const t=_.index+e;return t>=0&&t<_.entries.length},block:function(e){return void 0===e&&(e=!1),g.setPrompt(e)},listen:function(e){return g.appendListener(e)}};return _}},1245:e=>{e.exports={version:"1.0.0",properties:[{name:"desktopWebAuthenticationMode",description:"Enables signup and login by redirecting the user to the browser to complete the operation",enumSpec:{values:["none","loginAndSignupSingleButton","signupOnlySingleButton","loginOnlySingleButton"],default:"none"}}]}}},n={};function o(e){var a=n[e];if(void 0!==a)return a.exports;var r=n[e]={exports:{}};return t[e].call(r.exports,r,r.exports,o),r.exports}o.m=t,o.amdO={},e=[],o.O=(t,n,a,r)=>{if(!n){var s=1/0;for(g=0;g<e.length;g++){for(var[n,a,r]=e[g],i=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((e=>o.O[e](n[l])))?n.splice(l--,1):(i=!1,r<s&&(s=r));if(i){e.splice(g--,1);var c=a();void 0!==c&&(t=c)}}return t}r=r||0;for(var g=e.length;g>0&&e[g-1][2]>r;g--)e[g]=e[g-1];e[g]=[n,a,r]},o.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return o.d(t,{a:t}),t},o.d=(e,t)=>{for(var n in t)o.o(t,n)&&!o.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),o.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={535:0};o.O.j=t=>0===e[t];var t=(t,n)=>{var a,r,[s,i,l]=n,c=0;if(s.some((t=>0!==e[t]))){for(a in i)o.o(i,a)&&(o.m[a]=i[a]);if(l)var g=l(o)}for(t&&t(n);c<s.length;c++)r=s[c],o.o(e,r)&&e[r]&&e[r][0](),e[s[c]]=0;return o.O(g)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var a=o.O(void 0,[569],(()=>o(1913)));a=o.O(a)})();
//# sourceMappingURL=login.js.map